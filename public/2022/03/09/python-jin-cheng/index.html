<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="pythonè¿›ç¨‹, python,Linux,C/C++,LaTeX,Markdownç­‰">
    <meta name="description" content="pythonè¿›ç¨‹ç›¸å…³æ¨¡å—çš„ä½¿ç”¨">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>pythonè¿›ç¨‹ | HMZ-blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">HMZ-blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/navigate" class="waves-effect waves-light">
      
      <i class="fas fa-location-arrow" style="zoom: 0.6;"></i>
      
      <span>å¯¼èˆª</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="æ·±è‰²/æµ…è‰²æ¨¡å¼" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">HMZ-blog</div>
        <div class="logo-desc">
            
            æœ¬ç½‘ç«™æ˜¯ä¸ªäººå…´è¶£çˆ±å¥½ï¼Œæ€»ç»“åˆ†äº«ç»éªŒï¼Œè®°å½•ç”Ÿæ´»ç‚¹æ»´çš„å¹³å°ï¼Œå¸Œæœ›åœ¨ä»¥åçš„å­¦ä¹ æ—…é€”ä¸­ï¼Œèµ°å‡ºè‡ªå·±çš„é£æ™¯ã€‚
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/navigate" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-location-arrow"></i>
			
			å¯¼èˆª
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/hhhhmdzz/hhhhmdzz.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/hhhhmdzz/hhhhmdzz.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/20.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">pythonè¿›ç¨‹</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/python/">
                                <span class="chip bg-color">python</span>
                            </a>
                        
                            <a href="/tags/%E8%BF%9B%E7%A8%8B/">
                                <span class="chip bg-color">è¿›ç¨‹</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/python/" class="post-category">
                                python
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2022-03-09
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2022-08-17
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>æ–‡ç« å­—æ•°:&nbsp;&nbsp;
                    11.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>é˜…è¯»æ—¶é•¿:&nbsp;&nbsp;
                    48 åˆ†
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="pythonè¿›ç¨‹"><a href="#pythonè¿›ç¨‹" class="headerlink" title="pythonè¿›ç¨‹"></a>pythonè¿›ç¨‹</h1><p><font color="orange">For Windows</font></p>
<p>[toc]</p>
<h2 id="è¿›ç¨‹çš„æ¦‚å¿µ"><a href="#è¿›ç¨‹çš„æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹çš„æ¦‚å¿µ"></a>è¿›ç¨‹çš„æ¦‚å¿µ</h2><ul>
<li>outline<ul>
<li><a href="#def">è¿›ç¨‹çš„å®šä¹‰</a></li>
<li><a href="#char">è¿›ç¨‹çš„ç‰¹å¾</a></li>
<li><a href="#disp">è¿›ç¨‹è°ƒåº¦</a></li>
<li><a href="#parl">è¿›ç¨‹çš„å¹¶è¡Œä¸å¹¶å‘</a></li>
<li><a href="#state">è¿›ç¨‹çš„çŠ¶æ€</a></li>
<li><a href="#lib">pythonä¸­çš„è¿›ç¨‹åº“</a></li>
</ul>
</li>
</ul>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="def"><font color="lightblue">è¿›ç¨‹çš„å®šä¹‰</font></a><ul>
<li>ç‹­ä¹‰å®šä¹‰<br>è¿›ç¨‹æ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹(an instance of a computer program that is being executed)ã€‚</li>
<li>å¹¿ä¹‰å®šä¹‰<br>è¿›ç¨‹æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚å®ƒæ˜¯æ“ä½œç³»ç»ŸåŠ¨æ€æ‰§è¡Œçš„åŸºæœ¬å•å…ƒï¼Œåœ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ—¢æ˜¯åŸºæœ¬çš„åˆ†é…å•å…ƒï¼Œä¹Ÿæ˜¯åŸºæœ¬çš„æ‰§è¡Œå•å…ƒã€‚</li>
</ul>
</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œè¿›ç¨‹å°±æ˜¯ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå®ä½“ã€‚</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="char"><font color="lightblue">è¿›ç¨‹çš„ç‰¹å¾</font></a><ul>
<li>åŠ¨æ€æ€§ï¼šè¿›ç¨‹çš„å®è´¨æ˜¯ç¨‹åºåœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­çš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿›æ˜¯åŠ¨æ€äº§ç”Ÿï¼ŒåŠ¨æ€æ¶ˆäº¡çš„ã€‚</li>
<li>å¹¶å‘æ€§ï¼šä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åŒå…¶ä»–è¿›ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œ</li>
<li>ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç³»ç»Ÿåˆ†é…èµ„å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ï¼›</li>
<li>å¼‚æ­¥æ€§ï¼šç”±äºè¿›ç¨‹é—´çš„ç›¸äº’åˆ¶çº¦ï¼Œä½¿è¿›ç¨‹å…·æœ‰æ‰§è¡Œçš„é—´æ–­æ€§ï¼Œå³è¿›æŒ‰å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›</li>
<li>ç»“æ„ç‰¹å¾ï¼šè¿›ç¨‹ç”±ç¨‹åºã€æ•°æ®å’Œè¿›ç¨‹æ§åˆ¶å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚</li>
<li>å¤šä¸ªä¸åŒçš„è¿›ç¨‹å¯ä»¥åŒ…å«ç›¸åŒçš„ç¨‹åºï¼šä¸€ä¸ªç¨‹åºåœ¨ä¸åŒçš„æ•°æ®é›†é‡Œå°±æ„æˆä¸åŒçš„è¿›ç¨‹ï¼Œèƒ½å¾—åˆ°ä¸åŒçš„ç»“æœï¼›ä½†æ˜¯æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¨‹åºä¸èƒ½å‘ç”Ÿæ”¹å˜ã€‚</li>
</ul>
</li>
</ul>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="disp"><font color="lightblue">è¿›ç¨‹è°ƒåº¦</font></a><ul>
<li>å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼šåˆ©äºé•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ï¼Œè€Œä¸åˆ©äºçŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰</li>
<li>çŸ­ä½œä¸šä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼šå¯¹çŸ­ä½œä¸šæˆ–çŸ­è¿›ç¨‹ä¼˜å…ˆè°ƒåº¦</li>
<li>æ—¶é—´ç‰‡è½®è½¬æ³•ï¼šè®©æ¯ä¸ªè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­çš„ç­‰å¾…æ—¶é—´ä¸äº«å—æœåŠ¡çš„æ—¶é—´æˆæ¯”ä¾‹</li>
<li>å¤šçº§åé¦ˆé˜Ÿåˆ—ï¼šç›®å‰è¢«å…¬è®¤çš„ä¸€ç§è¾ƒå¥½çš„è¿›ç¨‹è°ƒåº¦ç®—æ³•</li>
</ul>
</li>
</ul>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="parl"><font color="lightblue">è¿›ç¨‹çš„å¹¶è¡Œä¸å¹¶å‘</font></a><ul>
<li>å¹¶è¡Œï¼šå¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œ</li>
<li>å¹¶å‘ï¼šå¤šä¸ªè¿›ç¨‹äº¤æ›¿è¿›è¡Œ</li>
</ul>
</li>
</ul>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><p><a id="state"><font color="lightblue">è¿›ç¨‹çš„çŠ¶æ€</font></a>ï¼šåˆ›å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€é€€å‡º</p>
</li>
<li><p>åŒæ­¥ä¸å¼‚æ­¥</p>
<ul>
<li>åŒæ­¥ï¼šå¯é çš„ä»»åŠ¡åºåˆ—ï¼Œè¿›ç¨‹1ä¾èµ–äºè¿›ç¨‹2ï¼Œåªæœ‰è¿›ç¨‹2å®Œæˆåï¼Œè¿›ç¨‹1æ‰ç®—å®Œæˆï¼Œå³è¿™ä¸¤ä¸ªè¿›ç¨‹çŠ¶æ€ä¿æŒä¸€è‡´ã€‚</li>
<li>å¼‚æ­¥ï¼šä¸å¯é çš„ä»»åŠ¡åºåˆ—ï¼Œè¿›ç¨‹1ä¾èµ–äºè¿›ç¨‹2ï¼Œä¸ç®¡è¿›ç¨‹2æ˜¯å¦å®Œæˆï¼Œè¿›ç¨‹1è‡ªå·±å®Œæˆå°±ç®—å®Œæˆï¼Œå³è¿™ä¸¤ä¸ªè¿›ç¨‹çŠ¶æ€ä¸ä¸€å®šä¿æŒä¸€è‡´ã€‚</li>
</ul>
</li>
<li><p>é˜»å¡ä¸éé˜»å¡ï¼šå³ç¨‹åºç­‰å¾…æ¶ˆæ¯çš„çŠ¶æ€ã€‚</p>
</li>
<li><p>åŒæ­¥/å¼‚æ­¥ä¸é˜»å¡/éé˜»å¡</p>
<ul>
<li>åŒæ­¥é˜»å¡ï¼šæ•ˆç‡æœ€ä½(åªæ’é˜Ÿ)</li>
<li>å¼‚æ­¥é˜»å¡ï¼šæ•ˆç‡è¾ƒä½(åªå«å·)</li>
<li>åŒæ­¥éé˜»å¡ï¼šæ•ˆç‡è¾ƒä½(æ’é˜Ÿ+æ‰“ç”µè¯)</li>
<li>å¼‚æ­¥éé˜»å¡ï¼šæ•ˆç‡é«˜(å«å·+æ‰“ç”µè¯)</li>
</ul>
</li>
</ul>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><p><a id="lib"><font color="lightblue">pythonä¸­çš„è¿›ç¨‹åº“</font></a></p>
<ul>
<li><code>subprocess</code>ï¼šé€‚ç”¨äºä¸å¤–éƒ¨è¿›ç¨‹äº¤äº’ï¼Œè°ƒç”¨å¤–éƒ¨è¿›ç¨‹</li>
</ul>
<p><code>subprocess</code>ç”¨æ¥æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼Œæ˜¯<code>os.fork()</code>å’Œ<code>os.execve()</code>çš„å°è£…ï¼Œå³å…ˆforkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå†è¿è¡Œæ–°çš„å¤–éƒ¨ç¨‹åºï¼Œ<font color="orange">å­è¿›ç¨‹ä¸ä¼šæŠŠçˆ¶è¿›ç¨‹çš„æ¨¡å—åŠ è½½ä¸€é</font>ã€‚</p>
<ul>
<li><code>multiprocessing</code></li>
</ul>
<p><code>multiprocessing</code>çš„åŸç†æ˜¯forkï¼Œ<code>fork()</code>è°ƒç”¨ï¼šè°ƒç”¨1æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡â€”â€”æ“ä½œç³»ç»Ÿè‡ªåŠ¨æŠŠå½“å‰è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰å¤åˆ¶äº†ä¸€ä»½ï¼ˆå­è¿›ç¨‹ï¼‰ï¼Œç„¶åï¼Œåˆ†åˆ«åœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å†…è¿”å›ï¼Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„pidï¼Œå­è¿›ç¨‹è¿”å›0ï¼Œå³çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹éƒ½åœ¨è¿è¡Œã€‚å¯¹äºå¤–éƒ¨è°ƒç”¨æ¥è¯´ï¼Œä½¿ç”¨multiprocessingå¤ªå èµ„æºã€‚</p>
</li>
</ul>
<hr>
<h2 id="è¿›ç¨‹çš„åŸºæœ¬æ“ä½œ"><a href="#è¿›ç¨‹çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="è¿›ç¨‹çš„åŸºæœ¬æ“ä½œ"></a>è¿›ç¨‹çš„åŸºæœ¬æ“ä½œ</h2><h3 id="multiprocessing-Process-ç±»"><a href="#multiprocessing-Process-ç±»" class="headerlink" title="multiprocessing.Process ç±»"></a><code>multiprocessing.Process</code> ç±»</h3><ul>
<li>outline<ul>
<li><strong><a href="#Process intro">Processç±»ä»‹ç»</a></strong></li>
<li><strong><a href="#Process examp">Processç±»å®ä¾‹</a></strong><ul>
<li><strong><a href="#Process0">ä½¿ç”¨Processå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹</a></strong></li>
<li><strong><a href="#Process1">ç»§æ‰¿Processå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹</a></strong></li>
<li><strong><a href="#Process2">ä½¿ç”¨Processå®ˆæŠ¤è¿›ç¨‹</a></strong></li>
<li><strong><a href="#Process3">å¤šè¿›ç¨‹socketèŠå¤©å¹¶å‘</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="Process intro"><font color="black"></font></a></p><h4><a id="Process intro"><font color="black">Processç±»ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Process</span><span class="token punctuation">{</span>
    group<span class="token punctuation">,</span>   <span class="token comment"># å‚æ•°æœªä½¿ç”¨ï¼Œå€¼å§‹ç»ˆä¸ºNone</span>
    target<span class="token punctuation">,</span>  <span class="token comment"># è°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</span>
    args<span class="token punctuation">,</span>    <span class="token comment"># è°ƒç”¨å¯¹è±¡çš„ä½ç½®å‚æ•°å…ƒç»„</span>
    kwargs<span class="token punctuation">,</span>  <span class="token comment"># è°ƒç”¨å¯¹è±¡çš„å­—å…¸</span>
    name<span class="token punctuation">,</span>    <span class="token comment"># å­è¿›ç¨‹çš„åç§°</span>
<span class="token punctuation">}</span></code></pre>

<details>
<summary>Processç±»æ–¹æ³•ã€å±æ€§(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo æ–¹æ³•</span>
p <span class="token operator">=</span> Process<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºå­è¿›ç¨‹</span>
p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å¯åŠ¨å­è¿›ç¨‹ï¼Œå¹¶è°ƒç”¨è¯¥å­è¿›ç¨‹ä¸­çš„ p.run() </span>
p<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># è¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•</span>
p<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹</span>
p<span class="token punctuation">.</span>is_alive<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># å¦‚æœpä»ç„¶è¿è¡Œï¼Œè¿”å›True</span>
p<span class="token punctuation">.</span>join<span class="token punctuation">(</span>timeout<span class="token punctuation">)</span>  <span class="token comment"># ä¸»çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼Œtimeoutæ˜¯å¯é€‰çš„è¶…æ—¶æ—¶é—´</span>

<span class="token comment"># todo å±æ€§</span>
p<span class="token punctuation">.</span>daemon    <span class="token comment"># é»˜è®¤å€¼ä¸ºFalse</span>
p<span class="token punctuation">.</span>name      <span class="token comment"># è¿›ç¨‹çš„åç§°</span>
p<span class="token punctuation">.</span>pid       <span class="token comment"># è¿›ç¨‹çš„pid</span>
p<span class="token punctuation">.</span>exitcode  <span class="token comment"># è¿›ç¨‹åœ¨è¿è¡Œæ—¶ä¸ºNoneã€å¦‚æœä¸ºâ€“Nï¼Œè¡¨ç¤ºè¢«ä¿¡å·Nç»“æŸ(äº†è§£å³å¯)</span>
p<span class="token punctuation">.</span>authkey   <span class="token comment"># è¿›ç¨‹çš„èº«ä»½éªŒè¯é”®ï¼Œé»˜è®¤æ˜¯ç”±os.urandom()éšæœºç”Ÿæˆçš„32å­—ç¬¦çš„å­—ç¬¦ä¸²</span></code></pre>

</details>

<details>
<summary>Processç±»æ–¹æ³•ã€å±æ€§(è¯¦)</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo å‚æ•°</span>
<span class="token keyword">class</span> <span class="token class-name">Process</span><span class="token punctuation">{</span>
    group<span class="token punctuation">,</span>   <span class="token comment"># å‚æ•°æœªä½¿ç”¨ï¼Œå€¼å§‹ç»ˆä¸ºNone</span>
    target<span class="token punctuation">,</span>  <span class="token comment"># è°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</span>
    args<span class="token punctuation">,</span>    <span class="token comment"># è°ƒç”¨å¯¹è±¡çš„ä½ç½®å‚æ•°å…ƒç»„</span>
    kwargs<span class="token punctuation">,</span>  <span class="token comment"># è°ƒç”¨å¯¹è±¡çš„å­—å…¸</span>
    name<span class="token punctuation">,</span>    <span class="token comment"># å­è¿›ç¨‹çš„åç§°</span>
<span class="token punctuation">}</span>

<span class="token comment"># todo æ–¹æ³•</span>
p <span class="token operator">=</span> Process<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºå­è¿›ç¨‹</span>
p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å¯åŠ¨å­è¿›ç¨‹ï¼Œå¹¶è°ƒç”¨è¯¥å­è¿›ç¨‹ä¸­çš„ p.run() </span>
p<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># è¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•</span>
    <span class="token triple-quoted-string string">"""
    è°ƒç”¨targetæŒ‡å®šçš„å‡½æ•°ï¼Œè‡ªå®šä¹‰ç±»çš„ç±»ä¸­ä¸€å®šè¦å®ç°è¯¥æ–¹æ³•
    """</span>
p<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹</span>
    <span class="token triple-quoted-string string">"""
    å¦‚æœpåˆ›å»ºäº†å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ï¼Œä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦ç‰¹åˆ«å°å¿ƒè¿™ç§æƒ…å†µ
    å¦‚æœpè¿˜ä¿å­˜äº†ä¸€ä¸ªé”é‚£ä¹ˆä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿›è€Œå¯¼è‡´æ­»é”
    """</span>
p<span class="token punctuation">.</span>is_alive<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># å¦‚æœpä»ç„¶è¿è¡Œï¼Œè¿”å›True</span>
p<span class="token punctuation">.</span>join<span class="token punctuation">(</span>timeout<span class="token punctuation">)</span>  <span class="token comment"># ä¸»çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼Œtimeoutæ˜¯å¯é€‰çš„è¶…æ—¶æ—¶é—´</span>
    <span class="token triple-quoted-string string">"""
    p.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹
    """</span>

<span class="token comment"># todo å±æ€§</span>
p<span class="token punctuation">.</span>daemon  <span class="token comment"># é»˜è®¤å€¼ä¸ºFalse</span>
    <span class="token triple-quoted-string string">"""
    å¦‚æœè®¾ä¸ºTrueï¼Œä»£è¡¨pä¸ºåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå½“pçš„çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œpä¹Ÿéšä¹‹ç»ˆæ­¢
    å¹¶ä¸”è®¾å®šä¸ºTrueåï¼ˆå¿…é¡»åœ¨p.start()ä¹‹å‰è®¾ç½®ï¼‰ï¼Œpä¸èƒ½åˆ›å»ºè‡ªå·±çš„æ–°è¿›ç¨‹
    """</span>
p<span class="token punctuation">.</span>name  <span class="token comment"># è¿›ç¨‹çš„åç§°</span>
p<span class="token punctuation">.</span>pid  <span class="token comment"># è¿›ç¨‹çš„pid</span>
p<span class="token punctuation">.</span>exitcode  <span class="token comment"># è¿›ç¨‹åœ¨è¿è¡Œæ—¶ä¸ºNoneã€å¦‚æœä¸ºâ€“Nï¼Œè¡¨ç¤ºè¢«ä¿¡å·Nç»“æŸ(äº†è§£å³å¯)</span>
p<span class="token punctuation">.</span>authkey  <span class="token comment"># è¿›ç¨‹çš„èº«ä»½éªŒè¯é”®ï¼Œé»˜è®¤æ˜¯ç”±os.urandom()éšæœºç”Ÿæˆçš„32å­—ç¬¦çš„å­—ç¬¦ä¸²</span>
    <span class="token triple-quoted-string string">"""
    è¿™ä¸ªé”®çš„ç”¨é€”æ˜¯ä¸ºæ¶‰åŠç½‘ç»œè¿æ¥çš„åº•å±‚è¿›ç¨‹é—´é€šä¿¡æä¾›å®‰å…¨æ€§ï¼Œè¿™ç±»è¿æ¥åªæœ‰åœ¨å…·æœ‰ç›¸åŒçš„èº«ä»½éªŒè¯é”®æ—¶æ‰èƒ½æˆåŠŸï¼ˆäº†è§£å³å¯ï¼‰
    """</span>

<span class="token comment"># todo æ³¨æ„äº‹é¡¹</span>
<span class="token triple-quoted-string string">"""
åœ¨Windowsåˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ä¼šè‡ªåŠ¨ import å¯åŠ¨å®ƒçš„è¿™ä¸ªæ–‡ä»¶ï¼Œ
è€Œåœ¨ import çš„æ—¶å€™åˆæ‰§è¡Œäº†æ•´ä¸ªæ–‡ä»¶ã€‚
å› æ­¤å¦‚æœå°†process()ç›´æ¥å†™åœ¨æ–‡ä»¶ä¸­å°±ä¼šæ— é™é€’å½’åˆ›å»ºå­è¿›ç¨‹æŠ¥é”™ï¼Œ
æ‰€ä»¥å¿…é¡»æŠŠåˆ›å»ºå­è¿›ç¨‹çš„éƒ¨åˆ†ä½¿ç”¨
if __name__ ==â€˜__main__â€™:
    pass
åˆ¤æ–­ä¿æŠ¤èµ·æ¥ï¼Œimport çš„æ—¶å€™ï¼Œå°±ä¸ä¼šé€’å½’è¿è¡Œäº†ã€‚
è€Œä¸”ä¸èƒ½åœ¨äº¤äº’å¼çš„ç¼–è¾‘å™¨ä¸‹é¢ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼šJupyter ç­‰ï¼
"""</span></code></pre>

</details>

<blockquote>
<p>æ³¨ï¼š<br>1.å­è¿›ç¨‹çš„æ‰§è¡Œé¡ºåºä¸æ˜¯æ ¹æ®å¯åŠ¨é¡ºåºå†³å®šçš„<br>2.<code>p.terminate()</code>å¼ºåˆ¶å…³é—­è¿›ç¨‹ï¼Œä½†æ˜¯ä¸ä¼šç«‹å³å…³é—­ï¼Œå¯ä»¥é€šè¿‡<code>p.is_alive()</code>æŸ¥çœ‹æ˜¯å¦å­˜æ´»<br>3.å¯ä»¥é€šè¿‡<code>p.join()</code>è®©ä¸»è¿›ç¨‹ç­‰åˆ°å­è¿›ç¨‹çœŸæ­£ç»“æŸ<br>4.å…³é—­å­è¿›ç¨‹åº”å…ˆ <code>p.terminate()</code> å† <code>p.join()</code></p>
</blockquote>
<p><a id="Process examp"><font color="black"></font></a></p><h4><a id="Process examp"><font color="black">Processç±»å®ä¾‹</font></a></h4><p></p>
<ul>
<li><a id="Process0">ä½¿ç”¨Processå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> time
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process

<span class="token keyword">def</span> <span class="token function">sub_process</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ­£åœ¨è¿è¡Œå­è¿›ç¨‹......"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å­è¿›ç¨‹PIDï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">ï¼Œçˆ¶è¿›ç¨‹PIDï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>os<span class="token punctuation">.</span>getppid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å­è¿›ç¨‹çš„å‚æ•°ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ­£åœ¨è¿è¡Œä¸»è¿›ç¨‹......"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ä¸»è¿›ç¨‹PIDï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å‡†å¤‡è¿è¡Œå­è¿›ç¨‹......"</span></span><span class="token punctuation">)</span>
    p <span class="token operator">=</span> Process<span class="token punctuation">(</span>
        target<span class="token operator">=</span>sub_process<span class="token punctuation">,</span>
        args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å¼€å§‹è¿è¡Œå­è¿›ç¨‹......"</span></span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ......"</span></span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å­è¿›ç¨‹è¿è¡Œç»“æŸ......"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ä¸»è¿›ç¨‹è¿è¡Œå³å°†ç»“æŸ......"</span></span><span class="token punctuation">)</span></code></pre>

<ul>
<li><a id="Process1">ç»§æ‰¿Processå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> time
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process

<span class="token keyword">class</span> <span class="token class-name">MyProcess</span><span class="token punctuation">(</span>Process<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""è‡ªå®šä¹‰ç±» ç»§æ‰¿Processç±»"""</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>arg1<span class="token punctuation">,</span>arg2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>arg1 <span class="token operator">=</span> arg1
        self<span class="token punctuation">.</span>arg2 <span class="token operator">=</span> arg2

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""å¿…é¡»å®ç°ä¸€ä¸ªrunæ–¹æ³•ï¼Œrunæ–¹æ³•ä¸­æ˜¯åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œçš„ä»£ç """</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"process name:</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, PID:</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>pid<span class="token punctuation">}</span></span><span class="token string">,args:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>arg1<span class="token punctuation">,</span> self<span class="token punctuation">.</span>arg2<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> MyProcess<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<ul>
<li><a id="Process2">ä½¿ç”¨Processå®ˆæŠ¤è¿›ç¨‹</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> time
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process

<span class="token keyword">def</span> <span class="token function">daemon_process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> i_func
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        i_func <span class="token operator">+=</span> <span class="token number">1</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'å®ˆæŠ¤è¿›ç¨‹è¿˜æ´»ç€</span><span class="token interpolation"><span class="token punctuation">{</span>i_func<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">com_process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ™®é€šè¿›ç¨‹å¼€å§‹......'</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ™®é€šè¿›ç¨‹ç»“æŸ......'</span><span class="token punctuation">)</span>

i_func <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    p_d <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>daemon_process<span class="token punctuation">)</span>
    p_d<span class="token punctuation">.</span>daemon <span class="token operator">=</span> <span class="token boolean">True</span>  <span class="token comment"># è®¾ç½®å­è¿›ç¨‹ä¸ºå®ˆæŠ¤è¿›ç¨‹</span>
    p_d<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    p_c <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>com_process<span class="token punctuation">)</span>  <span class="token comment"># æ™®é€šè¿›ç¨‹</span>
    p_c<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ™®é€šè¿›ç¨‹ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>p_c<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">ï¼Œæ˜¯å¦æ´»ç€ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>p_c<span class="token punctuation">.</span>is_alive<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    p_c<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ™®é€šè¿›ç¨‹ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>p_c<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">ï¼Œæ˜¯å¦æ´»ç€ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>p_c<span class="token punctuation">.</span>is_alive<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡ä¼‘çœ ......"</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ä¼‘çœ ç»“æŸ......"</span><span class="token punctuation">)</span></code></pre>

<ul>
<li><a id="Process3">å¤šè¿›ç¨‹socketèŠå¤©å¹¶å‘</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socket
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process
<span class="token comment"># server</span>


<span class="token comment"># client</span>


</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># ä½¿ç”¨å¤šè¿›ç¨‹å®ç°socketèŠå¤©å¹¶å‘-server</span>
<span class="token keyword">from</span> socket <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process

server <span class="token operator">=</span> socket<span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span>SOCK_STREAM<span class="token punctuation">)</span>
server<span class="token punctuation">.</span>setsockopt<span class="token punctuation">(</span>SOL_SOCKET<span class="token punctuation">,</span>SO_REUSEADDR<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">talk</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>client_addr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            msg<span class="token operator">=</span>conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span><span class="token keyword">break</span>
            conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
            <span class="token keyword">break</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span> <span class="token comment">#windowsä¸‹startè¿›ç¨‹ä¸€å®šè¦å†™åˆ°è¿™ä¸‹é¢</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        conn<span class="token punctuation">,</span>client_addr<span class="token operator">=</span>server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
        p <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>talk<span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>client_addr<span class="token punctuation">)</span><span class="token punctuation">)</span>
        p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#clientç«¯</span>
<span class="token keyword">from</span> socket <span class="token keyword">import</span> <span class="token operator">*</span>

client <span class="token operator">=</span> socket<span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span>SOCK_STREAM<span class="token punctuation">)</span>
client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'&gt;&gt;: '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span><span class="token keyword">continue</span>
 
    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
<h2 id="å­è¿›ç¨‹"><a href="#å­è¿›ç¨‹" class="headerlink" title="å­è¿›ç¨‹"></a>å­è¿›ç¨‹</h2><p><font color="red" size="6">ç„¯ï¼å¤ªTMéš¾å†™äº†ï¼Œä¸å†™äº†ï¼Œè‡ªå·±çœ‹åšå®¢å§.<br>è¿™ä¹ˆå¤šåšå®¢ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ã€‚</font><font size="10"><span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></font></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/w3cnote/python3-subprocess.html">subprocess-èœé¸Ÿæ•™ç¨‹</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/subprocess.html">subprocess-å®˜æ–¹æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/songhaixing/p/14275042.html">subprocess-ç›¸å…³åšå®¢-åšå®¢å›­1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-qing-/p/10934322.html">subprocess-ç›¸å…³åšå®¢-åšå®¢å›­2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/133941.htm">subprocess-ç›¸å…³åšå®¢-è„šæœ¬ä¹‹å®¶</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39059031/article/details/108440342">subprocess-ç›¸å…³åšå®¢-CSDN</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/430c411160f8">subprocess-ç›¸å…³åšå®¢-ç®€ä¹¦</a></p>
<h3 id="subprocess-æ¨¡å—"><a href="#subprocess-æ¨¡å—" class="headerlink" title="subprocess æ¨¡å—"></a><code>subprocess</code> æ¨¡å—</h3><p><code>subprocess</code>æ¨¡å—ï¼Œç”¨æ¥åˆ›å»ºå’Œç®¡ç†å­è¿›ç¨‹ï¼Œå¹¶èƒ½å¤Ÿä¸åˆ›å»ºçš„å­è¿›ç¨‹çš„<code>stdin</code>ã€<code>stdout</code>ã€<code>stderr</code>è¿æ¥é€šä¿¡ï¼Œè·å–å­è¿›ç¨‹æ‰§è¡Œç»“æŸåçš„<font color="orange">è¿”å›ç </font>ï¼Œåœ¨æ‰§è¡Œè¶…æ—¶æˆ–æ‰§è¡Œé”™è¯¯æ—¶å¾—åˆ°<font color="orange">å¼‚å¸¸</font>ã€‚</p>
<p>é—®é¢˜ï¼š<br>multiprocessingä¸­ï¼Œè°ƒç”¨p.join()ç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œç»“æŸ<br>subprocessæ¨¡å—â€“çˆ¶è¿›ç¨‹å¦‚ä½•ç›‘å¬å­è¿›ç¨‹ç»“æŸï¼Ÿ<br>ä¸¤ä¸ªæ–¹æ³•ï¼š<br>subprocess.Popen()çˆ¶è¿›ç¨‹å¼€å¯å­è¿›ç¨‹åï¼Œä¸ç®¡å…¶æ˜¯å¦ç»“æŸï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€æ­¥ï¼›<br>subprocess.Call()çˆ¶è¿›ç¨‹ä¸€ç›´ç­‰å¾…åˆ°å­è¿›ç¨‹è¿è¡Œç»“æŸï¼Œå†æ‰§è¡Œä¸‹ä¸€æ­¥ï¼›</p>
<ul>
<li>outline<ul>
<li><strong><a href="#subprocess intro"><code>subprocess</code> æ¨¡å—ä»‹ç»</a></strong></li>
<li><strong><a href="#subprocess examp"><code>subprocess</code> æ¨¡å—å®ä¾‹</a></strong><ul>
<li><strong><a href="#subprocess.run"><code>subprocess.run</code> ä¾‹å­</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="subprocess intro"><font color="black"></font></a></p><h4><a id="subprocess intro"><font color="black"><code>subprocess</code> æ¨¡å—ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python">subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ‰§è¡Œargså‚æ•°æ‰€è¡¨ç¤ºçš„å‘½ä»¤ï¼Œç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›ä¸€ä¸ªCompletedProcesså¯¹è±¡ã€‚</span>
subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># çˆ¶è¿›ç¨‹å¼€å¯å­è¿›ç¨‹åï¼Œä¸ç®¡å…¶æ˜¯å¦ç»“æŸï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€æ­¥ï¼›</span>
subprocess<span class="token punctuation">.</span>Call<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># ä¸æ¨èä½¿ç”¨ï¼Œçˆ¶è¿›ç¨‹ä¸€ç›´ç­‰å¾…åˆ°å­è¿›ç¨‹è¿è¡Œç»“æŸï¼Œå†æ‰§è¡Œä¸‹ä¸€æ­¥ï¼›</span></code></pre>

<blockquote>
<p><code>run</code>å‡½æ•°çš„åº•å±‚å°±æ˜¯<code>Popen</code>å‡½æ•°ã€‚<code>run</code>åŒæ­¥ï¼Œ<code>Popen</code>å¼‚æ­¥ã€‚<br><strong>åŒæ­¥å‡½æ•°</strong>ï¼šå½“ä¸€ä¸ªå‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œæ—¶ï¼Œé‚£ä¹ˆå½“è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶<font color="orange">ä¸ä¼šç«‹å³è¿”å›</font>ï¼Œç›´åˆ°è¯¥å‡½æ•°æ‰€è¦åšçš„äº‹æƒ…å…¨éƒ½åšå®Œäº†æ‰è¿”å›ã€‚<br><strong>å¼‚æ­¥å‡½æ•°</strong>ï¼šå¦‚æœä¸€ä¸ªå¼‚æ­¥å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¯¥å‡½æ•°<font color="orange">ä¼šç«‹å³è¿”å›</font>å°½ç®¡è¯¥å‡½æ•°è§„å®šçš„æ“ä½œä»»åŠ¡è¿˜æ²¡æœ‰å®Œæˆã€‚</p>
<blockquote>
<p><code>call</code>ã€<code>check_call</code>ã€<code>check_output</code>ã€<code>getoutput</code>ã€<code>getstatusoutput</code>ã€è¿™äº›å‡½æ•°ï¼Œéƒ½è¢«<code>run</code>å‡½æ•°ä»£æ›¿äº†ï¼Œå®ƒä»¬åœ¨å­˜åœ¨åªæ˜¯ä¸ºäº†ä¿æŒå‘ä¸‹å…¼å®¹ã€‚</p>
</blockquote>
</blockquote>
<ul>
<li><code>subprocess</code>çš„æ–¹æ³•ã€ç±»</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>
    args<span class="token punctuation">,</span>                     <span class="token comment"># é€šè¿‡åˆ›å»ºè¿›ç¨‹è€Œæ‰§è¡Œçš„å‘½ä»¤åŠå‚æ•°</span>
    stdin<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>               <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„è¾“å…¥é€”å¾„</span>
    <span class="token builtin">input</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>               <span class="token comment"># å‘½ä»¤çš„å…·ä½“è¾“å…¥å†…å®¹</span>
        <span class="token triple-quoted-string string">"""
        inputä¸stdinä¸èƒ½åŒæ—¶ä½¿ç”¨
        inputé»˜è®¤æ˜¯ä¸€ä¸ªbytesæµ
        """</span>
    stdout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„è¾“å‡ºé€”å¾„</span>
    stderr<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„errorè¾“å‡ºé€”å¾„</span>
    capture_output<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>     <span class="token comment"># æ˜¯å¦æ•è·è¿›ç¨‹çš„è¾“å‡º</span>
        <span class="token triple-quoted-string string">"""
        capture_output=Trueçš„æ•ˆæœä¸è®¾ç½®ä»¥ä¸‹çš„æ•ˆæœä¸€æ ·ã€‚
            stdout=PIPE, stderr=PIPE
        è®¾ç½®äº†capture_output=Trueï¼Œå°±ä¸èƒ½å†è®¾ç½®stdoutå’Œstderr
        """</span>
    shell<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>              <span class="token comment"># æ˜¯å¦é€šè¿‡shellæ¥æ‰§è¡Œå‘½ä»¤ï¼ˆLinuxä¸‹é»˜è®¤ä¸º/bin/shï¼‰</span>
        <span class="token triple-quoted-string string">"""
        shell=Falseï¼šargsåªèƒ½æ˜¯ä¸€ä¸ªä¸å¸¦å‚æ•°çš„å‘½ä»¤å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯å‘½ä»¤å’Œå‚æ•°ç»„æˆçš„ä¸€ä¸ªlist
        shell=Trueï¼šargså°±å¯ä»¥æ˜¯ä¸€ä¸ªæˆ‘ä»¬å¸¸è§çš„å‘½ä»¤å­—ç¬¦ä¸²
        """</span>
    cwd<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                 <span class="token comment"># æŒ‡ç¤ºäº†å½“å‰å·¥ä½œè·¯å¾„</span>
    timeout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>             <span class="token comment"># è®¾ç½®è¿›ç¨‹æ‰§è¡Œçš„è¶…æ—¶æ—¶é—´</span>
        <span class="token triple-quoted-string string">"""
        å¦‚æœæ—¶é—´åˆ°å­è¿›ç¨‹è¿˜æœªç»“æŸï¼Œsubprocess.TimeoutExpiredå¼‚å¸¸ä¼šæŠ›å‡ºã€‚
        timeoutå‚æ•°çš„å•ä½ï¼šç§’
        """</span>
    check<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>              <span class="token comment"># æ£€æŸ¥å¼‚å¸¸ï¼Ÿ</span>
        <span class="token triple-quoted-string string">"""
        å¦‚æœcheck=Trueï¼Œ
        åœ¨å­è¿›ç¨‹çš„è¿”å›ä¸ä¸º 0 çš„æ—¶å€™ï¼ŒæŠ›å‡ºsubprocess.CalledProcessErrorå¼‚å¸¸ã€‚
        è¿™æ—¶ï¼Œrunå‡½æ•°è¿”å›çš„CompletedProcesså¯¹è±¡çš„returncodeä¸å¯ç”¨ã€‚
        """</span>
    encoding<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>            <span class="token comment"># </span>
    errors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># </span>
    text<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                <span class="token comment"># å°†stdinï¼Œstdoutï¼Œstderrä¿®æ”¹ä¸ºstringæ¨¡å¼</span>
        <span class="token triple-quoted-string string">"""
        stdinï¼Œstdoutï¼Œstderræœ¬æ¥éƒ½æ˜¯å­—èŠ‚æµbytes
        """</span>
    env<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                 <span class="token comment"># </span>
    universal_newlines<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>  <span class="token comment"># åŒtext</span>
        <span class="token triple-quoted-string string">"""
        è¿™ä¸ªå‚æ•°çš„å­˜åœ¨ä¹Ÿæ˜¯ä¸ºäº†å‘ä¸‹å…¼å®¹
        ä»Python3.7å¼€å§‹æœ‰textå‚æ•°
        è€ŒPython3.5å’Œ3.6éƒ½æ˜¯universal_newlineså‚æ•°
        å› æ­¤ä½¿ç”¨textå‚æ•°å°±å¥½äº†
        """</span>
<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">subprocess</span><span class="token punctuation">.</span>PopenPopen<span class="token punctuation">(</span>
    args<span class="token punctuation">,</span>                     <span class="token comment"># é€šè¿‡åˆ›å»ºè¿›ç¨‹è€Œæ‰§è¡Œçš„å‘½ä»¤åŠå‚æ•°</span>
    bufsize<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>               <span class="token comment"># </span>
    executable<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>          <span class="token comment"># </span>
    stdin<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>               <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„è¾“å…¥é€”å¾„</span>
    stdout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„è¾“å‡ºé€”å¾„</span>
    stderr<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># æŒ‡å®šå‘½ä»¤çš„errorè¾“å‡ºé€”å¾„</span>
    preexec_fn<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>          <span class="token comment"># </span>
    close_fds<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>           <span class="token comment"># </span>
    shell<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>              <span class="token comment"># æ˜¯å¦é€šè¿‡shellæ¥æ‰§è¡Œå‘½ä»¤</span>
    cwd<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                 <span class="token comment"># æŒ‡ç¤ºäº†å½“å‰å·¥ä½œè·¯å¾„</span>
    env<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                 <span class="token comment"># </span>
    universal_newlines<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>  <span class="token comment"># åŒtext</span>
    startupinfo<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>         <span class="token comment"># </span>
    creationflags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>          <span class="token comment"># </span>
    restore_signals<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>     <span class="token comment"># </span>
    start_new_session<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>  <span class="token comment"># </span>
    pass_fds<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>              <span class="token comment"># </span>
    encoding<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>            <span class="token comment"># </span>
    errors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>              <span class="token comment"># </span>
    text<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>                <span class="token comment"># å°†stdinï¼Œstdoutï¼Œstderrä¿®æ”¹ä¸ºstringæ¨¡å¼</span>
<span class="token punctuation">)</span></code></pre>

<ul>
<li><code>subprocess.Popen</code>çš„æ–¹æ³•</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python">proc <span class="token operator">=</span> Popen<span class="token punctuation">(</span>args<span class="token punctuation">)</span>                 <span class="token comment"># </span>
out<span class="token punctuation">,</span> err <span class="token operator">=</span> proc<span class="token punctuation">.</span>communicate<span class="token punctuation">(</span>bstr<span class="token punctuation">)</span>  <span class="token comment"># </span>
returncode <span class="token operator">=</span> proc<span class="token punctuation">.</span>wait<span class="token punctuation">(</span>timeout<span class="token punctuation">)</span>    <span class="token comment"># </span></code></pre>

<details>
<summary>nothing</summary>

</details>

<p><a id="subprocess examp"><font color="black"></font></a></p><h4><a id="subprocess examp"><font color="black"><code>subprocess</code> æ¨¡å—å®ä¾‹</font></a></h4><p></p>
<ul>
<li><a id="subprocess.run"><code>subprocess.run</code> ä¾‹å­</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo run args:strã€shell</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> proc <span class="token operator">=</span> run<span class="token punctuation">(</span><span class="token string">'dir'</span><span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
Â·Â·Â·Â·Â·Â·
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> proc<span class="token punctuation">.</span>args
<span class="token string">'dir'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> proc<span class="token punctuation">.</span>returncode
<span class="token number">0</span>

<span class="token comment"># todo run args:listã€shell</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"ipconfig"</span><span class="token punctuation">,</span> <span class="token string">"/all"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
Â·Â·Â·Â·Â·Â·
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> proc<span class="token punctuation">.</span>args
<span class="token punctuation">[</span><span class="token string">"ipconfig"</span><span class="token punctuation">,</span> <span class="token string">"/all"</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> proc<span class="token punctuation">.</span>returncode
<span class="token number">0</span></code></pre>

<hr>
<h2 id="ä¸€äº›éå¸¸æœ‰ç”¨çš„å‡½æ•°"><a href="#ä¸€äº›éå¸¸æœ‰ç”¨çš„å‡½æ•°" class="headerlink" title="ä¸€äº›éå¸¸æœ‰ç”¨çš„å‡½æ•°"></a>ä¸€äº›éå¸¸æœ‰ç”¨çš„å‡½æ•°</h2><h3 id="multiprocessing-freeze-support-å‡½æ•°"><a href="#multiprocessing-freeze-support-å‡½æ•°" class="headerlink" title="multiprocessing.freeze_support() å‡½æ•°"></a><code>multiprocessing.freeze_support()</code> å‡½æ•°</h3><ul>
<li>outline<ul>
<li><strong><a href="#freeze_support intro"><code>freeze_support()</code> å‡½æ•°ä»‹ç»</a></strong></li>
<li><strong><a href="#freeze_support examp"><code>freeze_support()</code> å‡½æ•°å®ä¾‹</a></strong></li>
</ul>
</li>
</ul>
<p><a id="freeze_support intro"><font color="black"></font></a></p><h4><a id="freeze_support intro"><font color="black"><code>freeze_support()</code> å‡½æ•°ä»‹ç»</font></a></h4><p></p>
<ul>
<li>ä¸ºä»€ä¹ˆè¦æœ‰<code>freeze_support()</code>ï¼Ÿ</li>
</ul>
<p>å®˜æ–¹è§£é‡Šï¼š<a target="_blank" rel="noopener" href="https://docs.python.org/3.8/library/multiprocessing.html?highlight=freeze_support#multiprocessing.freeze_support">multiprocessing.freeze_support()Â¶</a><br>ã€€ã€€å½“ä½¿ç”¨<code>multiprocessing</code>çš„ç¨‹åºè¢«å†»ç»“ä»¥ç”ŸæˆWindowså¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œæ·»åŠ å¯¹è¯¥ç¨‹åºçš„æ”¯æŒã€‚ï¼ˆå·²ä½¿ç”¨<code>Py2Exe</code>ã€<code>PyInstaller</code>å’Œ<code>cx_Freeze</code>è¿›è¡Œäº†æµ‹è¯•ã€‚ï¼‰<br>ä¸ªäººç†è§£ï¼šå‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/Owen_goodman/article/details/115521388">multiprocessing.freeze_support()ä»‹ç»</a><br>ã€€ã€€Pythonå¤šè¿›ç¨‹<code>multiprocessing</code>åœ¨ Windows çš„ Dos æˆ–è€… idle ä¸‹è¿è¡Œä¸äº†ä¼šæŠ¥é”™ï¼Œæ‰“åŒ…æˆ.exeåŒå‡»ä¹‹åä¼šä¸€ç›´æ‰“å¼€exeï¼Œå¯¼è‡´å†…å­˜å æ»¡ï¼ˆè‡³äºä¸ºä»€ä¹ˆä¼šé€ æˆå†…å­˜æº¢å‡ºï¼Œæš‚æ—¶ä¸å¾—è€ŒçŸ¥ï¼Œåé¢è¿˜éœ€è¦å†ç ”ç©¶ä¸€ä¸‹ï¼‰ï¼Œåœ¨ PyCharm ä¸‹è¿è¡Œä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œåœ¨ Linux ä¸‹æ²¡æœ‰é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ª bugï¼Œpython3.8 æ·»åŠ äº†è¿™ä¸ªå‡½æ•°ã€‚</p>
<p><font color="orange">ç®€å•æ¥è¯´å°±æ˜¯ï¼Œæœ¬æ¥ä¹‹å‰æŠŠä½¿ç”¨<code>multiprocessing</code>çš„ç¨‹åºæ‰“åŒ…æˆ.exeæ–‡ä»¶æœ‰ bugï¼Œä½†æ˜¯ç°åœ¨åªè¦åœ¨<code>main</code>å…¥å£ä¸‹æ·»åŠ <code>multiprocessing.freeze_support()</code>å°±å¯ä»¥è§£å†³è¿™ä¸ª bug äº†ã€‚</font></p>
<ul>
<li>å…³äº<code>freeze_support()</code>ï¼Œå†å¤šè¯´å‡ å¥</li>
</ul>
<ol>
<li>å¦‚æœæ²¡æœ‰è°ƒç”¨ <code>freeze_support()</code> åœ¨å°è¯•è¿è¡Œè¢«å†»ç»“çš„å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼šæŠ›å‡º <code>RuntimeError</code> å¼‚å¸¸ã€‚</li>
<li>å¯¹ <code>freeze_support()</code> çš„è°ƒç”¨åœ¨é Windows å¹³å°ä¸Šæ˜¯æ— æ•ˆçš„ã€‚å¦‚æœè¯¥æ¨¡å—åœ¨ Windows å¹³å°çš„ Python è§£é‡Šå™¨ä¸­æ­£å¸¸è¿è¡Œ (è¯¥ç¨‹åºæ²¡æœ‰è¢«å†»ç»“)ï¼Œ è°ƒç”¨<code>freeze_support()</code> ä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚</li>
<li>å¦‚æœç¨‹åºå°†æ­£å¸¸è¿è¡Œè€Œä¸æ˜¯å†»ç»“ï¼Œåˆ™å¯ä»¥çœç•¥ <code>freeze_support()</code>ã€‚</li>
<li>æ€»çš„æ¥è¯´ï¼Œä¸ç®¡æ€æ ·æœ€å¥½åŠ ä¸Š <code>freeze_support()</code>ã€‚</li>
</ol>
<p><code>freeze_support()</code>æºä»£ç ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">freeze_support</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    Run code for process object if this in not the main process
    '''</span>
    <span class="token keyword">if</span> is_forking<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">:</span>
        kwds <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">for</span> arg <span class="token keyword">in</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            name<span class="token punctuation">,</span> value <span class="token operator">=</span> arg<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">'None'</span><span class="token punctuation">:</span>
                kwds<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                kwds<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        spawn_main<span class="token punctuation">(</span><span class="token operator">**</span>kwds<span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p><a id="freeze_support examp"><font color="black"></font></a></p><h4><a id="freeze_support examp"><font color="black"><code>freeze_support()</code> å‡½æ•°å®ä¾‹</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> freeze_support

<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    freeze_support<span class="token punctuation">(</span><span class="token punctuation">)</span>
    Process<span class="token punctuation">(</span>target<span class="token operator">=</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<hr>
<h2 id="è¿›ç¨‹åŒæ­¥"><a href="#è¿›ç¨‹åŒæ­¥" class="headerlink" title="è¿›ç¨‹åŒæ­¥"></a>è¿›ç¨‹åŒæ­¥</h2><h3 id="multiprocess-Lock-ç±»"><a href="#multiprocess-Lock-ç±»" class="headerlink" title="multiprocess.Lock ç±»"></a><code>multiprocess.Lock</code> ç±»</h3><h3 id="multiprocess-Semaphore-ç±»"><a href="#multiprocess-Semaphore-ç±»" class="headerlink" title="multiprocess.Semaphore ç±»"></a><code>multiprocess.Semaphore</code> ç±»</h3><h3 id="multiprocess-Event-ç±»"><a href="#multiprocess-Event-ç±»" class="headerlink" title="multiprocess.Event ç±»"></a><code>multiprocess.Event</code> ç±»</h3><hr>
<h2 id="è¿›ç¨‹é—´çš„é€šä¿¡æ¨¡å¼"><a href="#è¿›ç¨‹é—´çš„é€šä¿¡æ¨¡å¼" class="headerlink" title="è¿›ç¨‹é—´çš„é€šä¿¡æ¨¡å¼"></a>è¿›ç¨‹é—´çš„é€šä¿¡æ¨¡å¼</h2><p>è¿›ç¨‹é—´çš„é€šä¿¡æ¨¡å¼ IPC (Inter-Process Communication)</p>
<h3 id="multiprocessing-Pipe-æ–¹æ³•"><a href="#multiprocessing-Pipe-æ–¹æ³•" class="headerlink" title="multiprocessing.Pipe æ–¹æ³•"></a><code>multiprocessing.Pipe</code> æ–¹æ³•</h3><ul>
<li>outline<ul>
<li><strong><a href="#Pipe intro">Pipeæ–¹æ³•ä»‹ç»</a></strong></li>
<li><strong><a href="#Pipe examp">Pipeæ–¹æ³•å®ä¾‹</a></strong><ul>
<li><strong><a href="#Pipe0">Pipeä¸¤ä¸ªè¿›ç¨‹é—´é€šä¿¡</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="Pipe intro"><font color="black"></font></a></p><h4><a id="Pipe intro"><font color="black">Pipeæ–¹æ³•ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">Pipe</span><span class="token punctuation">(</span>duplex<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># é€šä¿¡æ¨¡å¼</span>
    <span class="token keyword">return</span> conn1<span class="token punctuation">,</span> conn2  <span class="token comment"># è¿”å›ä¸€ä¸ªç®¡é“çš„ä¸¤ç«¯</span></code></pre>

<blockquote>
<p><code>duplex=True</code>ï¼šå…¨åŒå·¥æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼ŒåŒæ–¹å‡å¯æ”¶å‘<br><code>duplex=False</code>ï¼šconn1åªæ¥æ”¶ï¼Œconn2åªå‘é€</p>
</blockquote>
<details>
<summary>Pipeæ–¹æ³•(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python">pipe <span class="token operator">=</span> Pipe<span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment"># </span>
pipe<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>recv<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>                       <span class="token comment"># æ¥æ”¶</span>
pipe<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>                       <span class="token comment"># å‘é€</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token comment"># </span>
conn<span class="token punctuation">.</span>fileno<span class="token punctuation">(</span><span class="token punctuation">)</span>                           <span class="token comment"># </span>
conn<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">[</span>timeout<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token comment"># </span>
conn<span class="token punctuation">.</span>recv_bytes<span class="token punctuation">(</span><span class="token punctuation">[</span>maxlength<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment"># </span>
conn<span class="token punctuation">.</span>send_bytes<span class="token punctuation">(</span><span class="token builtin">buffer</span><span class="token punctuation">,</span> offset<span class="token punctuation">,</span> size<span class="token punctuation">)</span>   <span class="token comment"># </span>
conn<span class="token punctuation">.</span>recv_bytes_into<span class="token punctuation">(</span><span class="token builtin">buffer</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span>    <span class="token comment"># </span></code></pre>

</details>

<details>
<summary>Pipeæ–¹æ³•(è¯¦)</summary>

<pre class="language-python" data-language="python"><code class="language-python">pipe <span class="token operator">=</span> Pipe<span class="token punctuation">(</span><span class="token punctuation">)</span>
pipe<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>recv<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>  <span class="token comment"># æ¥æ”¶</span>
pipe<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>  <span class="token comment"># å‘é€</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å…³é—­è¿æ¥ï¼Œå¦‚æœconnè¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•
    """</span>
conn<span class="token punctuation">.</span>fileno<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿”å›è¿æ¥ä½¿ç”¨çš„æ•´æ•°æ–‡ä»¶æè¿°ç¬¦
    """</span>
conn<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">[</span>timeout<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å¦‚æœè¿æ¥ä¸Šçš„æ•°æ®å¯ç”¨ï¼Œè¿”å›Trueã€‚
    timeoutæŒ‡å®šç­‰å¾…çš„æœ€é•¿æ—¶é™ã€‚
    å¦‚æœçœç•¥æ­¤å‚æ•°ï¼Œæ–¹æ³•å°†ç«‹å³è¿”å›ç»“æœã€‚
    å¦‚æœå°†timeoutå°„æˆNoneï¼Œæ“ä½œå°†æ— é™æœŸåœ°ç­‰å¾…æ•°æ®åˆ°è¾¾ã€‚
    """</span>
conn<span class="token punctuation">.</span>recv_bytes<span class="token punctuation">(</span><span class="token punctuation">[</span>maxlength<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    æ¥æ”¶ conn.send_bytes() æ–¹æ³•å‘é€çš„ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ã€‚
    maxlengthæŒ‡å®šè¦æ¥æ”¶çš„æœ€å¤§å­—èŠ‚æ•°ã€‚
    å¦‚æœè¿›å…¥çš„æ¶ˆæ¯ï¼Œè¶…è¿‡äº†è¿™ä¸ªæœ€å¤§å€¼ï¼Œå°†å¼•å‘IOErrorå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨è¿æ¥ä¸Šæ— æ³•è¿›è¡Œè¿›ä¸€æ­¥è¯»å–ã€‚
    å¦‚æœè¿æ¥çš„å¦å¤–ä¸€ç«¯å·²ç»å…³é—­ï¼Œå†ä¹Ÿä¸å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œå°†å¼•å‘EOFErrorå¼‚å¸¸ã€‚
    """</span>
conn<span class="token punctuation">.</span>send_bytes<span class="token punctuation">(</span><span class="token builtin">buffer</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> offset <span class="token punctuation">[</span><span class="token punctuation">,</span> size<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    é€šè¿‡è¿æ¥å‘é€å­—èŠ‚æ•°æ®ç¼“å†²åŒºï¼Œ
    bufferæ˜¯æ”¯æŒç¼“å†²åŒºæ¥å£çš„ä»»æ„å¯¹è±¡ï¼Œ
    offsetæ˜¯ç¼“å†²åŒºä¸­çš„å­—èŠ‚åç§»é‡ï¼Œ
    sizeæ˜¯è¦å‘é€å­—èŠ‚æ•°ã€‚
    ç»“æœæ•°æ®ä»¥å•æ¡æ¶ˆæ¯çš„å½¢å¼å‘å‡ºï¼Œ
    ç„¶åè°ƒç”¨ conn.recv_bytes() å‡½æ•°è¿›è¡Œæ¥æ”¶
    """</span>
conn<span class="token punctuation">.</span>recv_bytes_into<span class="token punctuation">(</span><span class="token builtin">buffer</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    æ¥æ”¶ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ï¼Œå¹¶æŠŠå®ƒä¿å­˜åœ¨bufferå¯¹è±¡ä¸­ï¼Œ
    è¯¥å¯¹è±¡æ”¯æŒå¯å†™å…¥çš„ç¼“å†²åŒºæ¥å£ï¼ˆå³bytearrayå¯¹è±¡æˆ–ç±»ä¼¼çš„å¯¹è±¡ï¼‰ã€‚
    offsetæŒ‡å®šç¼“å†²åŒºä¸­æ”¾ç½®æ¶ˆæ¯å¤„çš„å­—èŠ‚ä½ç§»ã€‚
    è¿”å›å€¼æ˜¯æ”¶åˆ°çš„å­—èŠ‚æ•°ã€‚
    å¦‚æœæ¶ˆæ¯é•¿åº¦å¤§äºå¯ç”¨çš„ç¼“å†²åŒºç©ºé—´ï¼Œå°†å¼•å‘BufferTooShortå¼‚å¸¸ã€‚
    """</span></code></pre>

</details>

<blockquote>
<p>æ³¨ï¼š<br>1.Pipe çš„è¯»å†™æ•ˆç‡è¦é«˜äº Queue<br>2.å¦‚æœæ²¡æœ‰æ¶ˆæ¯å¯æ¥æ”¶ï¼Œ<code>conn.recv()</code>æ–¹æ³•ä¼šä¸€ç›´é˜»å¡ã€‚<br>3.å¦‚æœç®¡é“å·²ç»è¢«å…³é—­ï¼Œ<code>conn.recv()</code>æ–¹æ³•ä¼šæŠ›å‡º<code>EOFError</code>ã€‚<br>4.<code>conn.close()</code>å¹¶æœªå…³é—­é€šé“ï¼Œåªæ˜¯æŠŠçŠ¶æ€æ”¹ä¸ºä¸å¯å†æ’å…¥å…ƒç´ çš„çŠ¶æ€<br>5.Pipeæ˜¯é€šè¿‡ socket è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„</p>
</blockquote>
<p><a id="Pipe examp"><font color="black"></font></a></p><h4><a id="Pipe examp"><font color="black">Pipeæ–¹æ³•å®ä¾‹</font></a></h4><p></p>
<ul>
<li><a id="Pipe0">Pipeä¸¤ä¸ªè¿›ç¨‹é—´é€šä¿¡</a></li>
</ul>
<p>pipeå®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸€å¯¹ä¸€æ¨¡å‹</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> time<span class="token punctuation">,</span> random
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> Pipe

<span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>pipe<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> product <span class="token keyword">in</span> products<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ç”Ÿäº§è€…å‘é€:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">)</span>
        pipe<span class="token punctuation">.</span>send<span class="token punctuation">(</span>product<span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span>pipe<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            item <span class="token operator">=</span> pipe<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ¶ˆè´¹è€…æ¥æ”¶:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> EOFError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ç”Ÿäº§è€…è·‘è·¯äº†'</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>

products <span class="token operator">=</span> <span class="token punctuation">[</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    pipe <span class="token operator">=</span> Pipe<span class="token punctuation">(</span>duplex<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    process_producer <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>producer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>pipe<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
    process_consumer <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>consumer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>pipe<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>

    process_producer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    process_consumer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    pipe<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    pipe<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

    process_producer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    process_consumer<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<blockquote>
<p>æ³¨ï¼š<br>1.è‹¥åŒæ–¹éƒ½æ²¡æœ‰ä½¿ç”¨ç®¡é“çš„æŸä¸ªç«¯ç‚¹ï¼Œå°±åº”è¯¥å…³é—­ç®¡é“<br>2.è‹¥ä¸€æ–¹å…³é—­äº†ç«¯ç‚¹ï¼Œç›¸åº”çš„å¦ä¸€ç«¯å¿…é¡»å…³é—­å…¶ç«¯ç‚¹<br>3.åº”å…ˆå…³é—­é€šé“ä¸¤ç«¯<code>pipe.close()</code>å†å…³é—­è¿›ç¨‹<code>proc.terminate()</code>å†ç­‰å¾…è¿›ç¨‹ç»“æŸ<code>proc.join()</code></p>
</blockquote>
<hr>
<h3 id="multiprocessing-Queue-ç±»"><a href="#multiprocessing-Queue-ç±»" class="headerlink" title="multiprocessing.Queue ç±»"></a><code>multiprocessing.Queue</code> ç±»</h3><ul>
<li>outline<ul>
<li><strong><a href="#Queue intro">Queueç±»ä»‹ç»</a></strong></li>
<li><strong><a href="#Queue examp">Queueç±»å®ä¾‹</a></strong><ul>
<li><strong><a href="#Queue0">Queueå¤šä¸ªè¿›ç¨‹é—´é€šä¿¡</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="Queue intro"><font color="black"></font></a></p><h4><a id="Queue intro"><font color="black">Queueç±»ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo å‚æ•°</span>
<span class="token keyword">class</span> <span class="token class-name">Queue</span><span class="token punctuation">{</span>maxsize<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span>  <span class="token comment"># é˜Ÿåˆ—ä¸­å…è®¸çš„æœ€å¤§é¡¹æ•°ï¼Œå¿½ç•¥/é»˜è®¤æ— å¤§å°é™åˆ¶</span></code></pre>

<details>
<summary>Queueç±»æ–¹æ³•(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo æ–¹æ³•</span>
q <span class="token operator">=</span> Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment"># é˜Ÿåˆ—å®ä¾‹åŒ–</span>
q<span class="token punctuation">.</span>get<span class="token punctuation">(</span>block<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>        <span class="token comment"># æ•°æ®å‡ºé˜Ÿï¼Œé˜»å¡</span>
q<span class="token punctuation">.</span>get_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment"># æ•°æ®å‡ºé˜Ÿï¼Œéé˜»å¡</span>
q<span class="token punctuation">.</span>put<span class="token punctuation">(</span>item<span class="token punctuation">,</span> block<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>  <span class="token comment"># æ•°æ®å…¥é˜Ÿï¼Œé˜»å¡</span>
q<span class="token punctuation">.</span>put_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment"># æ•°æ®å…¥é˜Ÿï¼Œéé˜»å¡</span>
q<span class="token punctuation">.</span>qsize<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment"># é˜Ÿåˆ—å¤§å°</span>
q<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment"># é˜Ÿåˆ—åˆ¤ç©º</span>
q<span class="token punctuation">.</span>full<span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment"># é˜Ÿåˆ—åˆ¤æ»¡</span>
q<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment"># å…³é—­é˜Ÿåˆ—</span>
q<span class="token punctuation">.</span>cancel_join_thread<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># å–æ¶ˆé˜Ÿåˆ—è¿æ¥åå°çº¿ç¨‹</span>
q<span class="token punctuation">.</span>join_thread<span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment"># é˜Ÿåˆ—è¿æ¥åå°çº¿ç¨‹</span></code></pre>

</details>

<details>
<summary>Queueç±»æ–¹æ³•(è¯¦)</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo æ–¹æ³•</span>
q <span class="token operator">=</span> Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span>get<span class="token punctuation">(</span> <span class="token punctuation">[</span> block <span class="token punctuation">[</span> <span class="token punctuation">,</span>timeout <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿”å›qä¸­çš„ä¸€ä¸ªé¡¹ç›®ã€‚
    å¦‚æœqä¸ºç©ºï¼Œæ­¤æ–¹æ³•å°†é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰é¡¹ç›®å¯ç”¨ä¸ºæ­¢ã€‚
    blockç”¨äºæ§åˆ¶é˜»å¡è¡Œä¸ºï¼Œé»˜è®¤ä¸ºTrueã€‚
    å¦‚æœè®¾ç½®ä¸ºFalseï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ï¼ˆå®šä¹‰åœ¨Queueæ¨¡å—ä¸­ï¼‰ã€‚
    timeoutæ˜¯å¯é€‰è¶…æ—¶æ—¶é—´ï¼Œç”¨åœ¨é˜»å¡æ¨¡å¼ä¸­ã€‚
    å¦‚æœåœ¨åˆ¶å®šçš„æ—¶é—´é—´éš”å†…æ²¡æœ‰é¡¹ç›®å˜ä¸ºå¯ç”¨ï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ã€‚
    """</span>
q<span class="token punctuation">.</span>get_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    åŒq.get(False)æ–¹æ³•ã€‚
    """</span>
q<span class="token punctuation">.</span>put<span class="token punctuation">(</span>item <span class="token punctuation">[</span><span class="token punctuation">,</span> block <span class="token punctuation">[</span><span class="token punctuation">,</span>timeout <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å°†itemæ”¾å…¥é˜Ÿåˆ—ã€‚
    å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œæ­¤æ–¹æ³•å°†é˜»å¡è‡³æœ‰ç©ºé—´å¯ç”¨ä¸ºæ­¢ã€‚
    blockæ§åˆ¶é˜»å¡è¡Œä¸ºï¼Œé»˜è®¤ä¸ºTrueã€‚
    å¦‚æœè®¾ç½®ä¸ºFalseï¼Œå°†å¼•å‘Queue.Emptyå¼‚å¸¸ï¼ˆå®šä¹‰åœ¨Queueåº“æ¨¡å—ä¸­ï¼‰ã€‚
    timeoutæŒ‡å®šåœ¨é˜»å¡æ¨¡å¼ä¸­ç­‰å¾…å¯ç”¨ç©ºé—´çš„æ—¶é—´é•¿çŸ­ã€‚
    è¶…æ—¶åå°†å¼•å‘Queue.Fullå¼‚å¸¸ã€‚
    """</span>
q<span class="token punctuation">.</span>put_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    åŒq.get(False)æ–¹æ³•ã€‚
    """</span>
q<span class="token punctuation">.</span>qsize<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿”å›é˜Ÿåˆ—ä¸­ç›®å‰é¡¹ç›®çš„æ­£ç¡®æ•°é‡ã€‚
    æ­¤å‡½æ•°çš„ç»“æœå¹¶ä¸å¯é ï¼Œ
    å› ä¸ºåœ¨è¿”å›ç»“æœå’Œåœ¨ç¨åç¨‹åºä¸­ä½¿ç”¨ç»“æœä¹‹é—´ï¼Œ
    é˜Ÿåˆ—ä¸­å¯èƒ½æ·»åŠ æˆ–åˆ é™¤äº†é¡¹ç›®ã€‚
    åœ¨æŸäº›ç³»ç»Ÿä¸Šï¼Œæ­¤æ–¹æ³•å¯èƒ½å¼•å‘NotImplementedErrorå¼‚å¸¸ã€‚
    """</span>
q<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•æ—¶ qä¸ºç©ºï¼Œè¿”å›Trueã€‚
    å¦‚æœå…¶ä»–è¿›ç¨‹æˆ–çº¿ç¨‹æ­£åœ¨å¾€é˜Ÿåˆ—ä¸­æ·»åŠ é¡¹ç›®ï¼Œç»“æœæ˜¯ä¸å¯é çš„ã€‚
    ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿”å›å’Œä½¿ç”¨ç»“æœä¹‹é—´ï¼Œé˜Ÿåˆ—ä¸­å¯èƒ½å·²ç»åŠ å…¥æ–°çš„é¡¹ç›®ã€‚
    """</span>
q<span class="token punctuation">.</span>full<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å¦‚æœqå·²æ»¡ï¼Œè¿”å›ä¸ºTrueã€‚
    ç”±äºçº¿ç¨‹çš„å­˜åœ¨ï¼Œç»“æœä¹Ÿå¯èƒ½æ˜¯ä¸å¯é çš„ï¼ˆå‚è€ƒq.emptyï¼ˆï¼‰æ–¹æ³•ï¼‰ã€‚
    """</span>
q<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å…³é—­é˜Ÿåˆ—ï¼Œé˜²æ­¢é˜Ÿåˆ—ä¸­åŠ å…¥æ›´å¤šæ•°æ®ã€‚
    è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œåå°çº¿ç¨‹å°†ç»§ç»­å†™å…¥é‚£äº›å·²å…¥é˜Ÿåˆ—ä½†å°šæœªå†™å…¥çš„æ•°æ®ï¼Œ
    ä½†å°†åœ¨æ­¤æ–¹æ³•å®Œæˆæ—¶é©¬ä¸Šå…³é—­ã€‚
    å¦‚æœqè¢«åƒåœ¾æ”¶é›†ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ã€‚
    å…³é—­é˜Ÿåˆ—ä¸ä¼šåœ¨é˜Ÿåˆ—ä½¿ç”¨è€…ä¸­ç”Ÿæˆä»»ä½•ç±»å‹çš„æ•°æ®ç»“æŸä¿¡å·æˆ–å¼‚å¸¸ã€‚
    ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªä½¿ç”¨è€…æ­£è¢«é˜»å¡åœ¨getï¼ˆï¼‰æ“ä½œä¸Šï¼Œ
    å…³é—­ç”Ÿäº§è€…ä¸­çš„é˜Ÿåˆ—ä¸ä¼šå¯¼è‡´getï¼ˆï¼‰æ–¹æ³•è¿”å›é”™è¯¯ã€‚
    """</span>
q<span class="token punctuation">.</span>cancel_join_thread<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    ä¸ä¼šå†è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨è¿æ¥åå°çº¿ç¨‹ã€‚
    è¿™å¯ä»¥é˜²æ­¢join_thread()æ–¹æ³•é˜»å¡ã€‚
    """</span>
q<span class="token punctuation">.</span>join_thread<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿æ¥é˜Ÿåˆ—çš„åå°çº¿ç¨‹ã€‚
    æ­¤æ–¹æ³•ç”¨äºåœ¨è°ƒç”¨q.close()æ–¹æ³•åï¼Œ
    ç­‰å¾…æ‰€æœ‰é˜Ÿåˆ—é¡¹è¢«æ¶ˆè€—ã€‚
    é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•ç”±ä¸æ˜¯qçš„åŸå§‹åˆ›å»ºè€…çš„æ‰€æœ‰è¿›ç¨‹è°ƒç”¨ã€‚
    è°ƒç”¨q.cancel_join_thread()æ–¹æ³•å¯ä»¥ç¦æ­¢è¿™ç§è¡Œä¸ºã€‚
    """</span></code></pre>

</details>
<!-- <br/> -->

<blockquote>
<p>æ³¨ï¼š<br>1.åº•å±‚é˜Ÿåˆ—ä½¿ç”¨ç®¡é“å’Œé”å®šå®ç°<br>2.<code>q.put()</code>å’Œ<code>q.get()</code>æ˜¯ä¸¤ä¸ªé˜»å¡æ–¹æ³•<br>3.<code>q.put_nowait()</code>å’Œ<code>q.get_nowait()</code>æ˜¯ä¸¤ä¸ªéé˜»å¡æ–¹æ³•ï¼Œæ•…ä¸€å®šè¦åšå¼‚å¸¸å¤„ç†ï¼ï¼ï¼<br>4.ä¸¤ä¸ªè¿›ç¨‹çš„ Queue å¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼Œè€Œæ˜¯å°†æ•°æ® pickle åä¼ ç»™å¦ä¸€ä¸ªè¿›ç¨‹çš„ Queue<br>5.Queueç”¨äºçˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æˆ–åŒä¸€çˆ¶è¿›ç¨‹çš„å­è¿›ç¨‹ä¹‹é—´é€šä¿¡</p>
</blockquote>
<p><a id="Queue examp"><font color="black"></font></a></p><h4><a id="Queue examp"><font color="black">Queueç±»å®ä¾‹</font></a></h4><p></p>
<ul>
<li><a id="Queue0">Queueå¤šä¸ªè¿›ç¨‹é—´é€šä¿¡</a></li>
</ul>
<p>Queueå®ç°ä¸€æ–¹å‘é€å¤šæ–¹æ¥æ”¶</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token punctuation">,</span> time<span class="token punctuation">,</span> random
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> Queue

<span class="token keyword">def</span> <span class="token function">proc_put</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> data<span class="token punctuation">,</span> proc_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> dat <span class="token keyword">in</span> data<span class="token punctuation">:</span>  <span class="token comment"># æ•°æ®å‘é€å®Œå°±è·³å‡º</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            q<span class="token punctuation">.</span>put_nowait<span class="token punctuation">(</span>dat<span class="token punctuation">)</span>  <span class="token comment"># æ•°æ®å…¥é˜Ÿ</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>proc_name<span class="token punctuation">}</span></span><span class="token string">æ–¹å‘é€æ•°æ®</span><span class="token interpolation"><span class="token punctuation">{</span>dat<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"é˜Ÿåˆ—æ»¡äº†ï¼"</span></span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">proc_get</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> proc_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> q<span class="token punctuation">.</span>qsize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># æ•°æ®æ¥æ”¶å®Œ(æ²¡æœ‰æ•°æ®)å°±è·³å‡º</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            dat <span class="token operator">=</span> q<span class="token punctuation">.</span>get_nowait<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># æ•°æ®å‡ºé˜Ÿ</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>proc_name<span class="token punctuation">}</span></span><span class="token string">æ–¹æ¥æ”¶æ•°æ®</span><span class="token interpolation"><span class="token punctuation">{</span>dat<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"é˜Ÿåˆ—ç©ºäº†ï¼"</span></span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    q <span class="token operator">=</span> Queue<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> <span class="token punctuation">[</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    proc_send1 <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>proc_put<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token string">"process send1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    proc_recv1 <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>proc_get<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">"process recv1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    proc_recv2 <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>proc_get<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">"process recv2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    proc_send1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_recv1<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_recv2<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    proc_send1<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_recv1<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_recv2<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<hr>
<h3 id="multiprocessing-JoinableQueue-ç±»"><a href="#multiprocessing-JoinableQueue-ç±»" class="headerlink" title="multiprocessing.JoinableQueue ç±»"></a><code>multiprocessing.JoinableQueue</code> ç±»</h3><p>å¯è¿æ¥çš„å…±äº«è¿›ç¨‹é˜Ÿåˆ—</p>
<ul>
<li>outline<ul>
<li><strong><a href="#JQ intro">JoinableQueueç±»ä»‹ç»</a></strong></li>
<li><strong><a href="#JQ examp">JoinableQueueç±»å®ä¾‹</a></strong></li>
</ul>
</li>
</ul>
<p><a id="JQ intro"><font color="black"></font></a></p><h4><a id="JQ intro"><font color="black">JoinableQueueç±»ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">JoinableQueue</span><span class="token punctuation">{</span>maxsize<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span>  <span class="token comment"># é˜Ÿåˆ—ä¸­å…è®¸çš„æœ€å¤§é¡¹æ•°ï¼Œå¿½ç•¥/é»˜è®¤æ— å¤§å°é™åˆ¶</span></code></pre>

<p><font color="grey">JoinableQueueçš„å®ä¾‹pé™¤äº†ä¸Queueå¯¹è±¡ç›¸åŒçš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å…·æœ‰ä»¥ä¸‹æ–¹æ³•</font></p>
<details>
<summary>JoinableQueueç±»æ–¹æ³•(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python">q<span class="token punctuation">.</span>task_done<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># å‘å‡ºä¿¡å·è¡¨ç¤ºq.get()è¿”å›çš„é¡¹ç›®å·²ç»è¢«å¤„ç†</span>
q<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># é˜»å¡ç›´åˆ°é˜Ÿåˆ—æ‰€æœ‰é¡¹ç›®è¢«å¤„ç†ä¸ºæ­¢ï¼Œå³æ‰€æœ‰é¡¹ç›®è¢«è°ƒç”¨q.task_done()ä¸ºæ­¢</span></code></pre>

<p><font>è¯´ç™½äº†ï¼Œ<code>q.task_done()</code>å°±æ˜¯å‘Šè¯‰ os å·²ç»å®Œæˆè¿™ä¸€æ¬¡çš„<code>q.get()</code>äº†ï¼Œ<code>q.join()</code>å‘Šè¯‰ osï¼šQueueå·²ç»å–å®Œã€æ²¡æœ‰å…ƒç´ äº†ï¼Œå¹¶ä¸”ç­‰å¾…ç»“æŸã€‚</font></p>
</details>

<details>
<summary>JoinableQueueç±»æ–¹æ³•(è¯¦)</summary>

<pre class="language-python" data-language="python"><code class="language-python">q<span class="token punctuation">.</span>task_done<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    ä½¿ç”¨è€…ä½¿ç”¨æ­¤æ–¹æ³•å‘å‡ºä¿¡å·ï¼Œè¡¨ç¤ºq.get()è¿”å›çš„é¡¹ç›®å·²ç»è¢«å¤„ç†ã€‚
    å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•çš„æ¬¡æ•°å¤§äºä»é˜Ÿåˆ—ä¸­åˆ é™¤çš„é¡¹ç›®æ•°é‡ï¼Œå°†å¼•å‘ValueErrorå¼‚å¸¸ã€‚
    """</span>
q<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    ç”Ÿäº§è€…å°†ä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œé˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ‰€æœ‰é¡¹ç›®å‡è¢«å¤„ç†ã€‚
    é˜»å¡å°†æŒç»­åˆ°ä¸ºé˜Ÿåˆ—ä¸­çš„æ¯ä¸ªé¡¹ç›®å‡è°ƒç”¨q.task_done()æ–¹æ³•ä¸ºæ­¢ã€‚ 
    """</span></code></pre>

</details>

<p><a id="JQ examp"><font color="black"></font></a></p><h4><a id="JQ examp"><font color="black">JoinableQueueç±»å®ä¾‹</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token punctuation">,</span> random
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> JoinableQueue

<span class="token keyword">def</span> <span class="token function">consumer</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        food <span class="token operator">=</span> q<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%såƒäº†ä¸€ä¸ª%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> food<span class="token punctuation">)</span><span class="token punctuation">)</span>
        q<span class="token punctuation">.</span>task_done<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># é€šçŸ¥é˜Ÿåˆ—å·²ç»æœ‰ä¸€ä¸ªæ•°æ®è¢«å¤„ç†äº†</span>

<span class="token keyword">def</span> <span class="token function">producer</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> name<span class="token punctuation">,</span> food<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%sç”Ÿäº§äº†%s%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> food<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        q<span class="token punctuation">.</span>put<span class="token punctuation">(</span>food <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    q <span class="token operator">=</span> JoinableQueue<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_con <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>consumer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">'con'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    proc_prod <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>producer<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">'pro'</span><span class="token punctuation">,</span> <span class="token string">'é¦’å¤´'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    proc_con<span class="token punctuation">.</span>daemon <span class="token operator">=</span> <span class="token boolean">True</span>  <span class="token comment"># è®¾ç½®å®ˆæŠ¤è¿›ç¨‹ï¼Œå¦åˆ™æ°¸è¿œè¿è¡Œï¼Œjoin()ä¹Ÿæ²¡ç”¨</span>
    proc_con<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    proc_prod<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># proc_con.join()        # ä¸è¦ä½¿ç”¨join()ï¼Œå¦åˆ™æ°¸è¿œè¿è¡Œ</span>
    proc_prod<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment"># ç”Ÿäº§è€…è¦å…ˆæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åˆ°é˜Ÿåˆ—ä¸­</span>
    q<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token comment"># é˜»å¡ç›´åˆ°æ”¾å…¥é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½è¢«å¤„ç†æ‰(æœ‰å¤šå°‘ä¸ªæ•°æ®å°±æ¥æ”¶åˆ°äº†å¤šå°‘task_done)</span></code></pre>

<hr>
<h2 id="è¿›ç¨‹é—´çš„æ•°æ®å…±äº«"><a href="#è¿›ç¨‹é—´çš„æ•°æ®å…±äº«" class="headerlink" title="è¿›ç¨‹é—´çš„æ•°æ®å…±äº«"></a>è¿›ç¨‹é—´çš„æ•°æ®å…±äº«</h2><h3 id="multiprocessing-Value-æ–¹æ³•"><a href="#multiprocessing-Value-æ–¹æ³•" class="headerlink" title="multiprocessing.Value æ–¹æ³•"></a><code>multiprocessing.Value</code> æ–¹æ³•</h3><h3 id="multiprocessing-Array-æ–¹æ³•"><a href="#multiprocessing-Array-æ–¹æ³•" class="headerlink" title="multiprocessing.Array æ–¹æ³•"></a><code>multiprocessing.Array</code> æ–¹æ³•</h3><p><code>Value</code>å’Œ<code>Array</code>å·®ä¸å¤šï¼ˆ<code>Value</code>å’Œ<code>Array</code>åˆ†åˆ«ç›¸å½“äºæ•°å’Œæ•°ç»„ï¼‰ï¼Œå°±æ”¾åœ¨ä¸€èµ·äº†ï¼Œå®ƒä»¬éƒ½æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨<font color="red">å…±äº«å†…å­˜</font>æ˜ å°„ä¸­ã€‚</p>
<p>åœ¨è¿›è¡Œå¹¶å‘ç¼–ç¨‹æ—¶ï¼Œé€šå¸¸æœ€å¥½å°½é‡é¿å…ä½¿ç”¨å…±äº«çŠ¶æ€ã€‚ä½¿ç”¨å¤šä¸ªè¿›ç¨‹æ—¶å°¤å…¶å¦‚æ­¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çœŸçš„éœ€è¦ä½¿ç”¨ä¸€äº›å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆ <code>multiprocessing</code>æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼š<code>Value</code>å’Œ<code>Array</code>ã€‚</p>
<blockquote>
<p><code>Value</code>å’Œ<code>Array</code>æ˜¯<font color="red">çº¿ç¨‹ä¸å®‰å…¨</font>çš„ï¼Œæ‰€ä»¥ä»¥ä¸‹å†…å®¹äº†è§£å³å¯ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„<code>Manager().Value</code>å’Œ<code>Manager().Array</code>ã€‚</p>
</blockquote>
<ul>
<li>outline<ul>
<li><strong><a href="#VA intro"><code>Value</code>å’Œ<code>Array</code>æ–¹æ³•ä»‹ç»</a></strong></li>
<li><strong><a href="#VA examp"><code>Value</code>å’Œ<code>Array</code>æ–¹æ³•å®ä¾‹</a></strong></li>
</ul>
</li>
</ul>
<p><a id="VA intro"><font color="black"></font></a></p><h4><a id="VA intro"><font color="black"><code>Value</code>å’Œ<code>Array</code>æ–¹æ³•ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">Value</span><span class="token punctuation">(</span>typecode_or_type<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> lock<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">Array</span><span class="token punctuation">(</span>typecode_or_type<span class="token punctuation">,</span> size_or_initializer<span class="token punctuation">,</span> lock<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å‚æ•°ï¼š
        typecode_or_typeï¼šè¿”å› ctypes å¯¹è±¡çš„ç±»å‹
        *argsï¼šä¼ é€’ç»™ ctypes çš„æ„é€ å‚æ•°
        size_or_initializerï¼šæ•°ç»„çš„é•¿åº¦æˆ–è€…åˆå§‹åŒ–æ•°ç»„çš„åºåˆ—
        lockï¼šæ˜¯å¦åŠ é”
    è¿”å›ï¼š
        ä»¥ä¸Šæ–¹æ³•è¿”å›ä»å…±äº«å†…å­˜ä¸­åˆ†é…çš„ä¸€ä¸ª ctypes å¯¹è±¡
    è¯´æ˜ï¼š
        1.size_or_initializerï¼šå¦‚æœå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé‚£ä¹ˆå®ƒç¡®å®šæ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä¸”æ•°ç»„å°†è¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚
        å¦åˆ™ï¼Œsize_or_initializeræ˜¯ç”¨äºåˆå§‹åŒ–æ•°ç»„çš„åºåˆ—ï¼Œå…¶é•¿åº¦å†³å®šæ•°ç»„çš„é•¿åº¦ã€‚
        
        2. ctypes æ˜¯ Python çš„ä¸€ä¸ªå¤–éƒ¨å‡½æ•°åº“ï¼Œå®ƒæä¾›äº†å’ŒCè¯­è¨€å…¼ä»»çš„æ•°æ®ç±»å‹ï¼Œ
        å¯ä»¥è°ƒç”¨ DLLs æˆ–è€…å…±äº«åº“çš„å‡½æ•°ï¼Œèƒ½è¢«ç”¨ä½œåœ¨ python ä¸­åŒ…è£¹è¿™äº›åº“ã€‚
    ä¾‹å¦‚ï¼š
        i = Value('i', 1)
        d = Value('d', 1)
        c = Value('c', '0')
    """</span></code></pre>

<p><code>'d'</code>å’Œ<code>'i'</code>å‚æ•°æ˜¯<code>array</code>æ¨¡å—ä½¿ç”¨çš„ç±»å‹çš„<code>typecode</code>ã€‚<code>'d'</code>è¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œ<code>'i'</code>è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚<font color="red">è¿™äº›å…±äº«å¯¹è±¡å°†æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹å®‰å…¨çš„ã€‚</font></p>
<p>ä¸ºäº†æ›´çµæ´»åœ°ä½¿ç”¨å…±äº«å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨<code>multiprocessing.sharedctypes</code>æ¨¡å—ï¼Œè¯¥æ¨¡å—æ”¯æŒåˆ›å»ºä»å…±äº«å†…å­˜åˆ†é…çš„ä»»æ„ctypeså¯¹è±¡ã€‚</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo Valueå±æ€§</span>
v <span class="token operator">=</span> Value<span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
v<span class="token punctuation">.</span>value</code></pre>

<ul>
<li><strong>å…±äº«æ•´æ•°æˆ–è€…å•ä¸ªå­—ç¬¦</strong></li>
</ul>
<p>å…±äº«æ•´æ•°æˆ–è€…å•ä¸ªå­—ç¬¦çš„åˆå§‹åŒ–æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸‹é¢çš„<font color="red">codeæ˜ å°„è¡¨</font>æ‰¾åˆ°å¯¹åº”å…³ç³»ã€‚</p>
<img src="/2022/03/09/python-jin-cheng/pythonè¿›ç¨‹-Value-Type_code.png" width="800">

<p><code>Value</code>åˆå§‹åŒ–æ•´æ•°ã€å­—ç¬¦ä¾‹å­ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Value

i <span class="token operator">=</span> Value<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> Value<span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span></code></pre>

<ul>
<li><strong>å…±äº«å­—ç¬¦ä¸²</strong></li>
</ul>
<p>å¦‚æœå…±äº«çš„æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™åœ¨ä¸Šè¡¨æ˜¯æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„ï¼Œå°±æ˜¯æ²¡æœ‰codeå¯ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŸå§‹çš„ctypeç±»å‹ï¼š<font color="red">ctypeç±»å‹å¯¹åº”è¡¨</font>ã€‚</p>
<img src="/2022/03/09/python-jin-cheng/pythonè¿›ç¨‹-Value-ctypes_type.png" width="830">

<p><code>Value</code>åˆå§‹åŒ–å­—ç¬¦ä¸²ä¾‹å­ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> ctypes <span class="token keyword">import</span> c_char_p
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Value<span class="token punctuation">,</span> Manager

<span class="token comment"># ss = Value(c_char_p, 'hello')  # è¿™é‡Œåœ¨æˆ‘çš„ç¯å¢ƒä¼šæŠ¥é”™ï¼Œä½¿ç”¨ä¸‹é¢çš„Manageråˆ™ä¸ä¼š</span>
ss <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">(</span>ctypes<span class="token punctuation">.</span>c_char_p<span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span></code></pre>

<p><a id="VA intro"><font color="black"></font></a></p><h4><a id="VA intro"><font color="black"><code>Value</code>å’Œ<code>Array</code>æ–¹æ³•å®ä¾‹</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> Value<span class="token punctuation">,</span> Array

<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    n<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">3.1415927</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    num <span class="token operator">=</span> Value<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
    arr <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    p <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>f<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>

<hr>
<h3 id="multiprocessing-Manager-æ–¹æ³•"><a href="#multiprocessing-Manager-æ–¹æ³•" class="headerlink" title="multiprocessing.Manager æ–¹æ³•"></a><code>multiprocessing.Manager</code> æ–¹æ³•</h3><p><code>Manager</code>æ˜¯é€šè¿‡å…±äº«è¿›ç¨‹çš„æ–¹å¼<font color="red">å…±äº«æ•°æ®</font>ã€‚<font color="grey">ç®€å•æ¥è¯´å°±æ˜¯ï¼Œè™½ç„¶è¿›ç¨‹é—´çš„æ•°æ®ä¸å…±äº«ï¼Œä½†æ˜¯ä¸€ä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡<code>Manager</code>ä¿®æ”¹å…¶ä»–è¿›ç¨‹çš„æ•°æ®ã€‚</font></p>
<p><code>Manager</code>ç®¡ç†çš„å…±äº«æ•°æ®ç±»å‹æœ‰ï¼š<code>Value</code>ã€<code>Array</code>ã€<code>dict</code>ã€<code>list</code>ã€<code>Lock</code>ã€<code>Semaphore</code>ç­‰ç­‰ï¼ŒåŒæ—¶<code>Manager</code>è¿˜å¯ä»¥å…±äº«ç±»çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<p><code>Manager</code>ä¸éœ€è¦åŠ é”ï¼Œå› ä¸º<code>Manager</code>å·²ç»é»˜è®¤ç»™ä½ åŠ é”äº†ã€‚</p>
<ul>
<li>outline<ul>
<li><strong><a href="#Manager intro"><code>Manager</code>æ–¹æ³•ä»‹ç»</a></strong></li>
<li><strong><a href="#Manager examp"><code>Manager</code>æ–¹æ³•å®ä¾‹</a></strong></li>
</ul>
</li>
</ul>
<p><a id="Manager intro"><font color="black"></font></a></p><h4><a id="Manager intro"><font color="black">Manageræ–¹æ³•ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python">manager <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># å®ä¾‹åŒ–Managerå¯¹è±¡</span>
manager<span class="token punctuation">.</span>Value<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># </span>
manager<span class="token punctuation">.</span>Array<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># </span>
manager<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># </span>
manager<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># </span>
manager<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># </span>
manager<span class="token punctuation">.</span>Semaphore<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># </span></code></pre>

<p><a id="Manager examp"><font color="black"></font></a></p><h4><a id="Manager examp"><font color="black">Manageræ–¹æ³•å®ä¾‹</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process<span class="token punctuation">,</span> Manager

<span class="token keyword">def</span> <span class="token function">func1</span><span class="token punctuation">(</span>shareList<span class="token punctuation">,</span> shareValue<span class="token punctuation">,</span> shareDict<span class="token punctuation">,</span> lock<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> lock<span class="token punctuation">:</span>
        shareValue<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
        shareDict<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'1'</span>
        shareDict<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2'</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>shareList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            shareList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    manager <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>
    list1   <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    value1  <span class="token operator">=</span> manager<span class="token punctuation">.</span>Value<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    dict1   <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    lock1   <span class="token operator">=</span> manager<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span>

    proc <span class="token operator">=</span> <span class="token punctuation">[</span>
        Process<span class="token punctuation">(</span>
            target<span class="token operator">=</span>func1<span class="token punctuation">,</span>
            args<span class="token operator">=</span><span class="token punctuation">(</span>list1<span class="token punctuation">,</span> value1<span class="token punctuation">,</span> dict1<span class="token punctuation">,</span> lock1<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">for</span> p <span class="token keyword">in</span> proc<span class="token punctuation">:</span>
        p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> p <span class="token keyword">in</span> proc<span class="token punctuation">:</span>
        p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>dict1<span class="token punctuation">)</span>

    array1 <span class="token operator">=</span> manager<span class="token punctuation">.</span>Array<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>array1<span class="token punctuation">)</span></code></pre>

<p>è¿è¡Œç»“æœï¼š</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">21</span>, <span class="token number">22</span>, <span class="token number">23</span>, <span class="token number">24</span>, <span class="token number">25</span><span class="token punctuation">]</span>
Value<span class="token punctuation">(</span><span class="token string">'i'</span>, <span class="token number">21</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token number">1</span>: <span class="token string">'1'</span>, <span class="token number">2</span>: <span class="token string">'2'</span><span class="token punctuation">}</span>
array<span class="token punctuation">(</span><span class="token string">'i'</span>, <span class="token punctuation">[</span><span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">8</span>, <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>

<hr>
<h2 id="è¿›ç¨‹æ± "><a href="#è¿›ç¨‹æ± " class="headerlink" title="è¿›ç¨‹æ± "></a>è¿›ç¨‹æ± </h2><h3 id="multiprocessing-Pool-æ–¹æ³•"><a href="#multiprocessing-Pool-æ–¹æ³•" class="headerlink" title="multiprocessing.Pool æ–¹æ³•"></a><code>multiprocessing.Pool</code> æ–¹æ³•</h3><ul>
<li>outline<ul>
<li><strong><a href="#Pool intro">Poolæ–¹æ³•ä»‹ç»</a></strong></li>
<li><strong><a href="#Pool examp">Poolæ–¹æ³•å®ä¾‹</a></strong><ul>
<li><strong><a href="#Pool0">ä½¿ç”¨å¤šçº¿ç¨‹-åº”ç”¨apply</a></strong></li>
<li><strong><a href="#Pool1">ä½¿ç”¨å¤šçº¿ç¨‹-æ˜ å°„map</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="Pool intro"><font color="black"></font></a></p><h4><a id="Pool intro"><font color="black">Poolæ–¹æ³•ä»‹ç»</font></a></h4><p></p>
<p>Poolå¯ä»¥æä¾›æŒ‡å®šæ•°é‡çš„è¿›ç¨‹ï¼Œä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æäº¤åˆ°Poolä¸­æ—¶ï¼Œå¦‚æœæ± è¿˜æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç”¨æ¥æ‰§è¡Œè¯¥è¯·æ±‚ï¼›ä½†å¦‚æœæ± ä¸­çš„è¿›ç¨‹æ•°å·²ç»è¾¾åˆ°è§„å®šæœ€å¤§å€¼ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­æœ‰è¿›ç¨‹ç»“æŸï¼Œæ‰ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹æ¥å®ƒã€‚</p>
<details>
<summary>Poolæ–¹æ³•(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python">p<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwds<span class="token punctuation">)</span>                  <span class="token comment"># é˜»å¡</span>
p<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>func<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwds<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>  <span class="token comment"># éé˜»å¡</span>
p<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment"># å…³é—­pool</span>
p<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment"># ç»“æŸå·¥ä½œè¿›ç¨‹</span>
p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>                                   <span class="token comment"># ä¸»è¿›ç¨‹é˜»å¡ï¼Œç­‰å¾…å­è¿›ç¨‹çš„é€€å‡º</span></code></pre>

</details>

<details>
<summary>Poolæ–¹æ³•(è¯¦)</summary>

<pre class="language-python" data-language="python"><code class="language-python">p<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwds<span class="token punctuation">)</span>                  <span class="token comment"># é˜»å¡</span>
p<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>func<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwds<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>  <span class="token comment"># å¼‚æ­¥éé˜»å¡</span>
p<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                                  <span class="token comment"># å…³é—­poolï¼Œä¸å†æ¥å—æ–°çš„ä»»åŠ¡</span>
p<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment"># ç»“æŸå·¥ä½œè¿›ç¨‹ï¼Œä¸å†å¤„ç†æœªå®Œæˆçš„ä»»åŠ¡</span>
p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>                                   <span class="token comment"># ä¸»è¿›ç¨‹é˜»å¡ï¼Œç­‰å¾…å­è¿›ç¨‹çš„é€€å‡º</span>

<span class="token number">1</span> æ–¹æ³•apply_async<span class="token punctuation">(</span><span class="token punctuation">)</span>å’Œmap_async<span class="token punctuation">(</span><span class="token punctuation">)</span>çš„è¿”å›å€¼æ˜¯AsyncResulçš„å®ä¾‹objã€‚å®ä¾‹å…·æœ‰ä»¥ä¸‹æ–¹æ³•
<span class="token number">2</span> obj<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>è¿”å›ç»“æœï¼Œå¦‚æœæœ‰å¿…è¦åˆ™ç­‰å¾…ç»“æœåˆ°è¾¾ã€‚timeoutæ˜¯å¯é€‰çš„ã€‚å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œå°†å¼•å‘ä¸€åœºã€‚
å¦‚æœè¿œç¨‹æ“ä½œä¸­å¼•å‘äº†å¼‚å¸¸ï¼Œå®ƒå°†åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶å†æ¬¡è¢«å¼•å‘ã€‚
<span class="token number">3</span> obj<span class="token punctuation">.</span>ready<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>å¦‚æœè°ƒç”¨å®Œæˆï¼Œè¿”å›<span class="token boolean">True</span>
<span class="token number">4</span> obj<span class="token punctuation">.</span>successful<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>å¦‚æœè°ƒç”¨å®Œæˆä¸”æ²¡æœ‰å¼•å‘å¼‚å¸¸ï¼Œè¿”å›<span class="token boolean">True</span>ï¼Œå¦‚æœåœ¨ç»“æœå°±ç»ªä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¼•å‘å¼‚å¸¸
<span class="token number">5</span> obj<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">[</span>timeout<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>ç­‰å¾…ç»“æœå˜ä¸ºå¯ç”¨ã€‚
<span class="token number">6</span> obj<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>ï¼šç«‹å³ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè¿›ç¨‹ï¼ŒåŒæ—¶ä¸æ‰§è¡Œä»»ä½•æ¸…ç†æˆ–ç»“æŸä»»ä½•æŒ‚èµ·å·¥ä½œã€‚å¦‚æœpè¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°</code></pre>

</details>

<p><a id="Pool examp"><font color="black"></font></a></p><h4><a id="Pool examp"><font color="black">Poolæ–¹æ³•å®ä¾‹</font></a></h4><p></p>
<ul>
<li><a id="Pool0">ä½¿ç”¨å¤šçº¿ç¨‹-åº”ç”¨apply</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool

<span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"msg: "</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"func end"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    pool <span class="token operator">=</span> Pool<span class="token punctuation">(</span>processes<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        msg <span class="token operator">=</span> <span class="token string">"hello world{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token comment"># pool.apply(func=func, args=(msg, ))        # é˜»å¡ï¼</span>
        pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>func<span class="token operator">=</span>func<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># éé˜»å¡ï¼</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"close......"</span><span class="token punctuation">)</span>
    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"done......"</span><span class="token punctuation">)</span></code></pre>

<blockquote>
<p>æ³¨ï¼š<br>1.è°ƒç”¨joinä¹‹å‰ï¼Œå…ˆè°ƒç”¨closeæˆ–è€…å‡½æ•°terminateï¼Œå¦åˆ™ä¼šå‡ºé”™<br>2.æ‰§è¡Œå®Œcloseåä¸ä¼šæœ‰æ–°çš„è¿›ç¨‹åŠ å…¥åˆ°pool,joinå‡½æ•°ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“</p>
</blockquote>
<ul>
<li><a id="Pool1">ä½¿ç”¨å¤šçº¿ç¨‹-æ˜ å°„map</a></li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool

<span class="token keyword">def</span> <span class="token function">task</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'num:%d; PID:%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>num<span class="token punctuation">,</span> os<span class="token punctuation">.</span>getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> num<span class="token operator">**</span><span class="token number">2</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> Pool<span class="token punctuation">(</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># é˜»å¡</span>
    <span class="token comment"># p.map_async(task, range(20))  # å¼‚æ­¥éé˜»å¡</span></code></pre>

<blockquote>
<p><code>map()</code>å’Œ<code>map_async()</code>å‚æ•°ä¸ºè¿­ä»£å™¨ç±»å‹</p>
</blockquote>
<hr>
<h2 id="åˆ†å¸ƒå¼è¿›ç¨‹"><a href="#åˆ†å¸ƒå¼è¿›ç¨‹" class="headerlink" title="åˆ†å¸ƒå¼è¿›ç¨‹"></a>åˆ†å¸ƒå¼è¿›ç¨‹</h2><p>åˆ†å¸ƒå¼è¿›ç¨‹ï¼šå°†Processè¿›ç¨‹åˆ†å¸ƒåˆ°å¤šå°æœºå™¨ä¸Šï¼Œå……åˆ†åˆ©ç”¨å¤šæ€æœºå™¨çš„æ€§èƒ½å®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚é€šå¸¸ä¼šæœ‰ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ä½œä¸ºè°ƒåº¦è€…ï¼Œå°†ä»»åŠ¡åˆ†å¸ƒåˆ°å…¶ä»–å¤šä¸ªè¿›ç¨‹ä¸­ï¼Œä¾é ç½‘ç»œé€šä¿¡è¿›è¡Œç®¡ç†ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä½¿ç”¨å¤šè¿›ç¨‹åšçˆ¬è™«ç¨‹åºæ—¶ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªè¿›ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹è´Ÿè´£æŠ“å–é“¾æ¥åœ°å€ï¼Œå°†é“¾æ¥åœ°å€æ”¾åˆ°queueä¸­ï¼›å¦ä¸€ä¸ªè¿›ç¨‹è´Ÿè´£ä»queueä¸­å–é“¾æ¥åœ°å€è¿›è¡Œä¸‹è½½å’Œå­˜å‚¨åˆ°æœ¬åœ°ã€‚å…¶ä¸­ï¼Œqueueéœ€è¦æš´éœ²åˆ°è¿›ç¨‹é€šä¿¡çš„ç½‘ç»œä¸­ã€‚</p>
<p>åˆ›å»ºåˆ†å¸ƒå¼è¿›ç¨‹çš„<font color="red">å¤§è‡´æ­¥éª¤</font>ï¼ˆå…·ä½“éœ€æ±‚ä¸åŒä¼šæœ‰å·®å¼‚ï¼‰ï¼š</p>
<ul>
<li><strong>STEP1</strong>ï¼šå®ä¾‹åŒ–Queueå¯¹è±¡</li>
</ul>
<p>å¾—æœ‰ä¸ªé˜Ÿåˆ—Queueæ¥å­˜å‚¨ä»»åŠ¡/æ•°æ®ï¼Œç”¨äºä¸åŒè¿›ç¨‹çš„é€šä¿¡ã€‚<br><font color="orange">ä»£ç </font>ï¼š<code>queue = queue.Queue()</code></p>
<ul>
<li><strong>STEP2</strong>ï¼šæ³¨å†ŒQueueå¯¹è±¡</li>
</ul>
<p>åœ¨å®ä¾‹åŒ–Queueå¯¹è±¡åï¼Œè¿˜éœ€è¦æŠŠQueueå¯¹è±¡æš´éœ²åœ¨é€šä¿¡ç½‘ç»œä¸­æ‰èƒ½ä½¿ç”¨ã€‚æœåŠ¡ç«¯éœ€è¦æ³¨å†Œå¯¹è±¡åŠå…¶æ–¹æ³•ï¼Œè€Œå®¢æˆ·ç«¯ åªéœ€è¦æ³¨å†Œæ–¹æ³•ï¼Œä¸éœ€è¦æ³¨å†Œå¯¹è±¡ã€‚<br><font color="orange">ä»£ç </font>ï¼š<br>æœåŠ¡ç«¯ï¼š<code>BaseManager.register("get_queue", callable=lambda: queue)</code><br>å®¢æˆ·ç«¯ï¼š<code>BaseManager.register("get_queue")</code></p>
<ul>
<li><strong>STEP3</strong>ï¼šå®ä¾‹åŒ–Managerå¯¹è±¡</li>
</ul>
<p>ä¸ºäº†å®ç°ä¸åŒè¿›ç¨‹/ä¸»æœºé—´çš„é€šä¿¡ï¼Œå¾—ç»‘å®šåœ°å€ã€ç«¯å£å’ŒéªŒè¯å£ä»¤ã€‚<br><font color="orange">ä»£ç </font>ï¼š<code>manager = BaseManager(address=('127.0.0.1', 8001), authkey=b'pwword')</code></p>
<ul>
<li><strong>STEP3.5</strong>ï¼šå†»ç»“æ”¯æŒ</li>
</ul>
<p>ç”±äºpythonåœ¨ä½¿ç”¨Manageræ—¶ä¼šå‡ºç°ä¸€äº› bugï¼Œéœ€è¦åœ¨<code>mari()</code>é‡Œé¢ä½¿ç”¨å†»ç»“æ”¯æŒå‡½æ•°ï¼Œä¹‹åæ‰èƒ½æ­£å¸¸è¿›è¡Œå¼€å¯æœåŠ¡ã€è¿æ¥æœåŠ¡ç­‰æ“ä½œã€‚ï¼ˆä¸Šé¢æœ‰è®²ï¼Œå¿˜è®°çš„è¯å¯ä»¥ç¿»ä¸Šå»çœ‹ä¸€ä¸‹ï¼‰<br><font color="orange">ä»£ç </font>ï¼š<code>freeze_support()</code></p>
<ul>
<li><strong>STEP4</strong>ï¼šæœåŠ¡ç«¯å¼€å¯ï¼Œå®¢æˆ·ç«¯è¿æ¥</li>
</ul>
<p>æœåŠ¡å™¨å¼€å¯æœåŠ¡ æˆ–è€… å¯åŠ¨ç®¡ç†ã€ç›‘å¬ä¿¡é“ï¼›å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ã€‚<br><font color="orange">ä»£ç </font>ï¼š</p>
<ol>
<li>æœåŠ¡å™¨å¯åŠ¨ç®¡ç†ï¼š<code>manager.start()</code></li>
<li>æœåŠ¡å™¨å¼€å¯æœåŠ¡ï¼š<br>ã€€ã€€å…ˆè·å–æœåŠ¡å™¨å¯¹è±¡<code>server = manager.get_server()</code><br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç„¶åæ°¸ä¹…å¼€å¯æœåŠ¡ï¼š<code>server.serve_forever()</code></li>
<li>å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ï¼š<code>manager.connect()</code></li>
</ol>
<ul>
<li><strong>STEP5</strong>ï¼šä»Managerå¯¹è±¡è·å¾—Queueå¯¹è±¡</li>
</ul>
<p>ä»Managerè·å–Queueï¼Œç”¨äºåˆ†é…ã€æ‰§è¡Œä»»åŠ¡<br><font color="orange">ä»£ç </font>ï¼š<code>queue = manager.get_queue()</code></p>
<ul>
<li><strong>STEP6</strong>ï¼šåˆ†é…ã€æ‰§è¡Œä»»åŠ¡</li>
</ul>
<p>ä¸€æ–¹(ä¸ä¸€å®šæ˜¯æœåŠ¡å™¨)åˆ†é…ä»»åŠ¡ï¼Œå¦ä¸€æ–¹æ‰§è¡Œä»»åŠ¡ã€‚<br><font color="orange">ä»£ç </font>ï¼š<br>åˆ†é…ï¼š<code>queue.put(task)</code><br>æ‰§è¡Œï¼š<code>queue.get()</code></p>
<ul>
<li><strong>STEP7</strong>ï¼šç»“æŸä»»åŠ¡</li>
</ul>
<p>å¦‚æœæœåŠ¡ç«¯ä½¿ç”¨æ°¸ä¹…å¼€å¯æœåŠ¡(<strong>STEP4</strong>ä¸­çš„2.)ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ç»“æŸä»»åŠ¡ï¼Œå¦åˆ™å°±è¦ç»“æŸä»»åŠ¡è¿›ç¨‹ã€‚<br><font color="orange">ä»£ç </font>ï¼š<code>manager.shutdown()</code></p>
<details><summary>å…³äºåˆ†å¸ƒå¼è¿›ç¨‹ä¸­çš„é˜Ÿåˆ—Queueä¸€äº›è¯</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">"""
æ³¨æ„ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€å°æœºå™¨ä¸Šå†™å¤šè¿›ç¨‹ç¨‹åºæ—¶ï¼Œåˆ›å»ºçš„Queueå¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œ
ä½†æ˜¯ï¼Œåœ¨åˆ†å¸ƒå¼å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ï¼Œæ·»åŠ ä»»åŠ¡åˆ°Queueä¸å¯ä»¥ç›´æ¥å¯¹åŸå§‹çš„task_queueè¿›è¡Œæ“ä½œï¼Œ
é‚£æ ·å°±ç»•è¿‡äº†QueueManagerçš„å°è£…ï¼Œå¿…é¡»é€šè¿‡manager.get_task_queue()è·å¾—çš„Queueæ¥å£æ·»åŠ ã€‚


ä»»åŠ¡è¿›ç¨‹è¦é€šè¿‡ç½‘ç»œè¿æ¥åˆ°æœåŠ¡è¿›ç¨‹ï¼Œæ‰€ä»¥è¦æŒ‡å®šæœåŠ¡è¿›ç¨‹çš„IP
å…ˆå¯åŠ¨task_master.pyæœåŠ¡è¿›ç¨‹
task_master.pyè¿›ç¨‹å‘é€å®Œä»»åŠ¡åï¼Œå¼€å§‹ç­‰å¾…resulté˜Ÿåˆ—çš„ç»“æœã€‚
å†å¯åŠ¨task_worker.pyè¿›ç¨‹
task_worker.pyè¿›ç¨‹ç»“æŸï¼Œåœ¨task_master.pyè¿›ç¨‹ä¸­ä¼šç»§ç»­æ‰“å°å‡ºç»“æœ


Queueå¯¹è±¡å­˜å‚¨åœ¨å“ªï¼Ÿ
æ³¨æ„åˆ°task_worker.pyä¸­æ ¹æœ¬æ²¡æœ‰åˆ›å»ºQueueçš„ä»£ç ï¼Œ
æ‰€ä»¥ï¼ŒQueueå¯¹è±¡å­˜å‚¨åœ¨task_master.pyè¿›ç¨‹ä¸­ï¼Œå³server
è€ŒQueueä¹‹æ‰€ä»¥èƒ½é€šè¿‡ç½‘ç»œè®¿é—®ï¼Œå°±æ˜¯é€šè¿‡QueueManagerå®ç°çš„ã€‚
ç”±äºQueueManagerç®¡ç†çš„ä¸æ­¢ä¸€ä¸ªQueueï¼Œ
æ‰€ä»¥ï¼Œè¦ç»™æ¯ä¸ªQueueçš„ç½‘ç»œè°ƒç”¨æ¥å£èµ·ä¸ªåå­—ï¼Œæ¯”å¦‚get_task_queueã€‚
authkeyæœ‰ä»€ä¹ˆç”¨ï¼Ÿ
è¿™æ˜¯ä¸ºäº†ä¿è¯ä¸¤å°æœºå™¨æ­£å¸¸é€šä¿¡ï¼Œä¸è¢«å…¶ä»–æœºå™¨æ¶æ„å¹²æ‰°ã€‚
å¦‚æœtask_worker.pyçš„authkeyå’Œtask_master.pyçš„authkeyä¸ä¸€è‡´ï¼Œè‚¯å®šè¿æ¥ä¸ä¸Šã€‚
"""</span></code></pre>

</details>

<h3 id="multiprocessing-managers-æ¨¡å—"><a href="#multiprocessing-managers-æ¨¡å—" class="headerlink" title="multiprocessing.managers æ¨¡å—"></a><code>multiprocessing.managers</code> æ¨¡å—</h3><ul>
<li>outline<ul>
<li><strong><a href="#managers intro">managersç±»ä»‹ç»</a></strong></li>
<li><strong><a href="#managers examp">managersç±»å®ä¾‹</a></strong><ul>
<li><strong><a href="#managers1">managersç¤ºä¾‹1ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆå…±ä¸‰æ–¹å‚ä¸ï¼‰</a></strong></li>
<li><strong><a href="#managers2">managersç¤ºä¾‹2ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆå…±ä¸¤æ–¹å‚ä¸ï¼‰</a></strong></li>
<li><strong><a href="#managers3">managersç¤ºä¾‹3ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆä¸€å¯¹å¤šï¼‰</a></strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a id="managers intro"><font color="black"></font></a></p><h4><a id="managers intro"><font color="black">managersç±»ä»‹ç»</font></a></h4><p></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">BaseManager</span><span class="token punctuation">(</span>
    address<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>         <span class="token comment"># åœ°å€</span>
    authkey<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>         <span class="token comment"># èº«ä»½éªŒè¯</span>
    serializer<span class="token operator">=</span><span class="token string">'pickle'</span><span class="token punctuation">,</span>  <span class="token comment"># åºåˆ—åŒ–ç¨‹åº</span>
    ctx<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>             <span class="token comment"># æ–­ç»­å™¨ï¼Ÿ</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span></code></pre>

<details>
<summary>BaseManager ç±»æ–¹æ³•(ç•¥)</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># todo ç±»æ–¹æ³•</span>
BaseManager<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># ä¸ºmanagerå¯¹è±¡ç”ŸæˆæœåŠ¡å™¨è¿›ç¨‹</span>
BaseManager<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># å°†managerå¯¹è±¡è¿æ¥åˆ°æœåŠ¡å™¨è¿›ç¨‹</span>
BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨managerç±»å‹æ³¨å†Œç±»å‹ ID</span>
BaseManager<span class="token punctuation">.</span>get_server<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è¿”å›å…·æœ‰serve_forever()æ–¹æ³•å’Œåœ°å€å±æ€§çš„æœåŠ¡å™¨å¯¹è±¡</span>
BaseManager<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># åŠ å…¥managerè¿›ç¨‹ï¼ˆå¦‚æœå·²ç”Ÿæˆï¼‰</span>
BaseManager<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># å…³é—­managerè¿›ç¨‹</span></code></pre>

</details>

<details><summary>BaseManager ç±»æ–¹æ³•(è¯¦)</summary>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary>BaseManager.start()å‡½æ•°</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">start</span><span class="token punctuation">(</span>initializer<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> initargs<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    å¯åŠ¨manager
    """</span></code></pre>

<p>å…·ä½“ä½¿ç”¨è§<font color="red">ä¾‹2</font></p>
</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary>BaseManager.connect()å‡½æ•°</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿æ¥æœåŠ¡å™¨è¿›ç¨‹
    """</span></code></pre>

<p>å…·ä½“ä½¿ç”¨è§<font color="red">ä¾‹1</font></p>
</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary>BaseManager.register()å‡½æ•°</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span>
    typeid<span class="token punctuation">,</span>             <span class="token comment"># å­—ç¬¦ä¸²ï¼Œç±»å‹æ ‡è¯†ç¬¦</span>
    <span class="token builtin">callable</span><span class="token punctuation">,</span>           <span class="token comment"># å¯è°ƒç”¨å¯¹è±¡çš„</span>
    proxytype<span class="token punctuation">,</span>          <span class="token comment"># </span>
    exposed<span class="token punctuation">,</span>            <span class="token comment"># </span>
    method_to_typeid<span class="token punctuation">,</span>   <span class="token comment"># </span>
    create_method<span class="token punctuation">,</span>      <span class="token comment"># </span>
<span class="token punctuation">)</span><span class="token punctuation">:</span></code></pre>

<blockquote>
<p>è¯´å¾—é€šä¿—ä¸€ç‚¹ï¼š<br>1.<code>register</code>å‡½æ•°å¹²çš„äº‹å°±æ˜¯ç»™<code>BaseManager</code>ç±»æ³¨å†Œä¸€ä¸ªå‡½æ•°ï¼ˆç±»ä¼¼åŠ¨æ€ç»‘å®šï¼Ÿï¼‰<br>2.<code>typeid</code>å‚æ•°å°±æ˜¯æ³¨å†Œå¯¹è±¡å¯ä»¥è°ƒç”¨çš„å‡½æ•°<br>3.<code>callable</code>å‚æ•°ä¸€èˆ¬æ˜¯é˜Ÿåˆ—çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸€èˆ¬ç”¨å‡½æ•°è¿”å›ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</blockquote>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> queue
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> BaseManager
q <span class="token operator">=</span> queue<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># todo æ³•1ï¼šå®šä¹‰å‡½æ•°</span>
<span class="token keyword">def</span> <span class="token function">get_q</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> q
    <span class="token keyword">return</span> q
BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_q'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span>get_q<span class="token punctuation">)</span>

<span class="token comment"># todo æ³•2ï¼šåŒ¿åå‡½æ•°</span>
BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_q'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> q<span class="token punctuation">)</span>

<span class="token comment"># å»ºè®®ä½¿ç”¨æ ‡å‡†å‡½æ•°æ¥ä»£æ›¿lambdaå‡½æ•°ï¼Œé¿å…python2.7ä¸­ï¼Œpickleæ— æ³•åºåˆ—åŒ–lambdaçš„é—®é¢˜ï¼Œè™½ç„¶ä½†æ˜¯ç°åœ¨åŸºæœ¬éƒ½åœ¨ç”¨python3</span></code></pre>

  <details><summary>BaseManager.register() çš„(å®˜æ–¹ï¼Ÿ)å‚æ•°æè¿°(å·²ç¿»è¯‘)ï¼š</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">register</span><span class="token punctuation">(</span>
    typeid<span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        typeid is a â€œtype identifierâ€ which is used to identify a particular type of shared object. This must be a string.
        typeid æ˜¯ä¸€ä¸ªâ€œç±»å‹æ ‡è¯†ç¬¦â€ï¼Œç”¨äºæ ‡è¯†ç‰¹å®šç±»å‹çš„å…±äº«å¯¹è±¡ã€‚è¿™å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
        """</span>
    <span class="token builtin">callable</span><span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        callable is a callable used for creating objects for this type identifier. 
        callable æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„ä½¿ç”¨ï¼Œç”¨äºä¸ºæ­¤ç±»å‹æ ‡è¯†ç¬¦åˆ›å»ºå¯¹è±¡ã€‚

        If a manager instance will be created using the from_address() classmethod or if the create_method argument is False then this can be left as None.
        å¦‚æœå°†ä½¿ç”¨from_address()ç±»æ–¹æ³•æˆ– create_method=False åˆ›å»º Manager å®ä¾‹ï¼Œåˆ™è¿™å¯ä»¥ç•™ä¸‹ã€‚
        """</span>
    proxytype<span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        proxytype is a subclass of BaseProxy which is used to create proxies for shared objects with this typeid. 
        proxytype æ˜¯BaseProxyçš„å­ç±»ï¼Œç”¨äºåˆ›å»ºå…·æœ‰æ­¤ç±»å‹çš„å…±äº«å¯¹è±¡çš„ä»£ç†ã€‚

        If None then a proxy class is created automatically.
        å¦‚æœ proxytype=Noneï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºä»£ç†ç±»proxyã€‚
        """</span>
    exposed<span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        exposed is used to specify a sequence of method names which proxies for this typeid should be allowed to access using BaseProxy._callmethod(). 
        exposed ç”¨äºæŒ‡å®šåº”å…è®¸ä½¿ç”¨ BaseProxy._callMethod() çš„ä»£ç†çš„æ–¹æ³•åç§°çš„åºåˆ—ã€‚

        (If exposed is None then proxytype._exposed_ is used instead if it exists.) 
        ï¼ˆå¦‚æœ exposed=Noneï¼Œåˆ™ä¸ä½¿ç”¨proxytype._exposed_å¦‚æœå­˜åœ¨ã€‚ï¼‰

        In the case where no exposed list is specified, all â€œpublic methodsâ€ of the shared object will be accessible. 
        åœ¨æœªæŒ‡å®šæœªå…¬å¼€åˆ—è¡¨çš„æƒ…å†µä¸‹ï¼Œå°†å¯ä»¥è®¿é—®å…±äº«å¯¹è±¡çš„æ‰€æœ‰â€œå…¬å…±æ–¹æ³•â€ã€‚

        (Here a â€œpublic methodâ€ means any attribute which has a __call__() method and whose name does not begin with '_'.)
        ï¼ˆè¿™é‡Œæœ‰ä¸€ä¸ªâ€œå…¬å…±æ–¹æ³•â€æ˜¯æŒ‡å…·æœ‰ __call __()æ–¹æ³•çš„ä»»ä½•å±æ€§ï¼Œå…¶åç§°ä¸ä¼šä»¥'_'å¼€å¤´ã€‚ï¼‰
        """</span>
    method_to_typeid<span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        method_to_typeid is a mapping used to specify the return type of those exposed methods which should return a proxy. It maps method names to typeid strings. 
        method_to_typeId æ˜¯ç”¨äºæŒ‡å®šåº”è¿”å›ä»£ç†çš„é‚£äº›å…¬å¼€æ–¹æ³•çš„è¿”å›ç±»å‹çš„æ˜ å°„ã€‚å®ƒå°†æ–¹æ³•åç§°æ˜ å°„åˆ° typeid å­—ç¬¦ä¸²ã€‚

        (If method_to_typeid is None then proxytype._method_to_typeid_ is used instead if it exists.) 
        ï¼ˆå¦‚æœmethod_to_typeId=Noneï¼Œåˆ™ä½¿ç”¨proxytype._method_to_typeid_ï¼Œè€Œä¸æ˜¯å­˜åœ¨ã€‚ï¼‰

        If a methodâ€™s name is not a key of this mapping or if the mapping is None then the object returned by the method will be copied by value.
        å¦‚æœæ–¹æ³•çš„åç§°ä¸æ˜¯æ­¤æ˜ å°„çš„é”®ï¼Œæˆ–è€…å¦‚æœæ˜ å°„ä¸ºNoneï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›çš„å¯¹è±¡å°†è¢«å€¼å¤åˆ¶ã€‚
        """</span>
    create_method<span class="token punctuation">,</span> 
        <span class="token triple-quoted-string string">"""
        create_method determines whether a method should be created with name typeid which can be used to tell the server process to create a new shared object and return a proxy for it. By default it is True.
        create_method ç¡®å®šæ˜¯å¦åº”è¯¥ä½¿ç”¨åç§°ç±»å‹åˆ›å»ºæ–¹æ³•ï¼Œè¯¥ç±»å‹å¯ä»¥ç”¨äºå‘Šè¯‰æœåŠ¡å™¨è¿›ç¨‹åˆ›å»ºæ–°çš„å…±äº«å¯¹è±¡å¹¶è¿”å›ä»£ç†ã€‚é»˜è®¤create_method=Trueã€‚
        """</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    A classmethod which can be used for registering a type or callable with the manager class.
    ä¸€ä¸ªç±»æ–¹æ³•ï¼Œå¯ç”¨äºæ³¨å†Œç±»å‹æˆ–å¯è°ƒç”¨managerç±»ã€‚
    """</span></code></pre>

  </details>
</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary>BaseManager.get_server() å‡½æ•°</summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_server</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    è¿”å›æœ‰serve_forever()æ–¹æ³•çš„æœåŠ¡å™¨å¯¹è±¡
    """</span></code></pre>

<p>å…·ä½“ä½¿ç”¨è§<font color="red">ä¾‹1</font></p>
</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary>BaseManager.join() å‡½æ•°</summary>

<p>è¿™ä¸ªå‡½æ•°æ²¡å•¥å¥½è¯´çš„ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„<code>join</code>ï¼Œä½†æ˜¯è²Œä¼¼åœ¨è¿™å¾ˆå°‘ç”¨åˆ°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">join</span><span class="token punctuation">(</span>timeout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span></code></pre>

</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
<details><summary><font>BaseManager.shutdown() å‡½æ•°</font></summary>

<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> BaseManager<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">"""
    åªæœ‰å½“è¿›ç¨‹start()ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼Œç”¨äºå…³é—­managerè¿›ç¨‹
    """</span></code></pre>

<p>å…·ä½“ä½¿ç”¨è§<font color="red">ä¾‹2</font></p>
</details>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
</details>



<p><a id="managers examp"><font color="black"></font></a></p><h4><a id="managers examp"><font color="black">managersç±»å®ä¾‹</font></a></h4><p></p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="managers1">managersç¤ºä¾‹1ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆå…±ä¸‰æ–¹å‚ä¸ï¼‰</a></li>
</ul>
<p>å®ä¾‹è¯´æ˜ï¼šæœ¬ä¾‹ä¸­ç»§æ‰¿äº†<code>BaseManager</code>ç±»ï¼Œå½“ç„¶ï¼ŒæŠŠå…¶ä¸­çš„<code>QueueManager</code>æ¢æˆ<code>BaseManager</code>ä¹Ÿæ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚</p>
<p><font color="red">æœåŠ¡ç«¯Server</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> queue
<span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager

que <span class="token operator">=</span> queue<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">QueueManager</span><span class="token punctuation">(</span>BaseManager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>


QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">"get_queue"</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span><span class="token keyword">lambda</span><span class="token punctuation">:</span>que<span class="token punctuation">)</span>
m <span class="token operator">=</span> QueueManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span><span class="token string">"abc"</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

s <span class="token operator">=</span> m<span class="token punctuation">.</span>get_server<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p><font color="red">å‘é€ç«¯Send</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager


<span class="token keyword">class</span> <span class="token class-name">QueueManager</span><span class="token punctuation">(</span>BaseManager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>


QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">"get_queue"</span><span class="token punctuation">)</span>
m <span class="token operator">=</span> QueueManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span><span class="token string">"abc"</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>

queue <span class="token operator">=</span> m<span class="token punctuation">.</span>get_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span></code></pre>

<p><font color="red">æ¥æ”¶ç«¯Recv</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager


<span class="token keyword">class</span> <span class="token class-name">QueueManager</span><span class="token punctuation">(</span>BaseManager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>


QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">"get_queue"</span><span class="token punctuation">)</span>
m <span class="token operator">=</span> QueueManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span><span class="token string">"abc"</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>

queue <span class="token operator">=</span> m<span class="token punctuation">.</span>get_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>address<span class="token punctuation">)</span></code></pre>

<blockquote>
<p>ä½¿ç”¨æ–¹æ³•ï¼šä¾æ¬¡å¯åŠ¨æœåŠ¡ç«¯ã€å‘é€ç«¯å’Œæ¥æ”¶ç«¯å³å¯ã€‚</p>
</blockquote>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="managers2">managersç¤ºä¾‹2ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆå…±ä¸¤æ–¹å‚ä¸ï¼‰</a></li>
</ul>
<p>å®ä¾‹è¯´æ˜ï¼šmanageræœåŠ¡ç«¯ç”¨äºæ§åˆ¶ï¼Œworkerå·¥ä½œåŠç”¨äºæ‰§è¡Œã€‚è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¤§ä½“æ€è·¯å·®ä¸å¤šï¼Œå…·ä½“æ­¥éª¤å¯å±•å¼€ä¸‹é¢å†…å®¹æŸ¥çœ‹ã€‚</p>
<details><summary>åˆ›å»ºåˆ†å¸ƒå¼è¿›ç¨‹éœ€è¦çš„<font color="red">æ­¥éª¤</font>ï¼š</summary>

<ul>
<li><strong>ä¸€ã€å»ºç«‹ç”¨äºè¿›ç¨‹é—´é€šä¿¡çš„é˜Ÿåˆ—Queue</strong></li>
</ul>
<p>æœåŠ¡è¿›ç¨‹åˆ›å»ºä»»åŠ¡é˜Ÿåˆ— task_queue å’Œç»“æœé˜Ÿåˆ— result_queueã€‚ä»»åŠ¡é˜Ÿåˆ— task_queue ç”¨æ¥ä½œä¸º<font color="orange">ä¼ é€’ä»»åŠ¡ç»™ä»»åŠ¡è¿›</font>ç¨‹çš„é€šé“ï¼›æœåŠ¡è¿›ç¨‹åˆ›å»ºç»“æœé˜Ÿåˆ— result_queue ç”¨æ¥ä½œä¸ºä»»åŠ¡è¿›ç¨‹<font color="orange">å®Œæˆä»»åŠ¡åå›å¤æœåŠ¡è¿›ç¨‹</font>çš„é€šé“ã€‚åœ¨åˆ†å¸ƒå¼å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ï¼Œå¿…é¡»ç”± Queuemanager è·å¾— Queue æ¥å£æ¥æ·»åŠ ä»»åŠ¡ã€‚</p>
<ul>
<li><strong>äºŒã€åœ¨ç½‘ç»œä¸Šæ³¨å†Œç¬¬ä¸€æ­¥ä¸­å»ºç«‹çš„é˜Ÿåˆ—ï¼Œæš´éœ²ç»™å…¶ä»–è¿›ç¨‹ï¼ˆä¸»æœºï¼‰</strong></li>
</ul>
<p>æ³¨å†Œåè·å¾—ç½‘ç»œé˜Ÿåˆ—ï¼Œç›¸å½“äºæœ¬åœ°é˜Ÿåˆ—çš„æ˜ åƒã€‚</p>
<ul>
<li><strong>ä¸‰ã€å»ºç«‹å¯¹è±¡å®ä¾‹managerï¼Œç»‘å®šç«¯å£å’ŒéªŒè¯å£ä»¤</strong></li>
</ul>
<p>å¯¹è±¡çš„ç±»Queuemanagerç»§æ‰¿è‡ªBaseManager</p>
<ul>
<li><strong>å››ã€å¯åŠ¨ç®¡ç†å®ä¾‹managerï¼Œç›‘ç®¡ä¿¡æ¯é€šé“</strong></li>
</ul>
<p>å³ï¼šå¯åŠ¨ç¬¬ä¸‰æ­¥ä¸­å»ºç«‹çš„å®ä¾‹</p>
<ul>
<li><strong>äº”ã€é€šè¿‡ç®¡ç†å®ä¾‹çš„æ–¹æ³•è·å¾—é€šè¿‡ç½‘ç»œè®¿é—®çš„Queueå¯¹è±¡</strong></li>
</ul>
<p>å³ï¼šå†æŠŠç½‘ç»œé˜Ÿåˆ—å®ä½“åŒ–æˆå¯ä»¥ä½¿ç”¨çš„æœ¬åœ°é˜Ÿåˆ—</p>
<ul>
<li><strong>å…­ã€åˆ›å»ºä»»åŠ¡ã€ä¸Šä¼ ä»»åŠ¡ã€åˆ†é…ä»»åŠ¡</strong></li>
</ul>
<p>åˆ›å»ºä»»åŠ¡åˆ° â€œæœ¬åœ°â€é˜Ÿåˆ—ä¸­ï¼Œè‡ªåŠ¨ä¸Šä¼ ä»»åŠ¡åˆ°ç½‘ç»œé˜Ÿåˆ—ä¸­ï¼Œåˆ†é…ç»™ä»»åŠ¡è¿›ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>
</details>

<p><font color="red">manageræœåŠ¡å™¨</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager
<span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> freeze_support<span class="token punctuation">,</span> Queue

<span class="token comment"># ä»»åŠ¡ä¸ªæ•°</span>
task_number <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment"># æ”¶å‘é˜Ÿåˆ—</span>
task_quue <span class="token operator">=</span> Queue<span class="token punctuation">(</span>task_number<span class="token punctuation">)</span>
result_queue <span class="token operator">=</span> Queue<span class="token punctuation">(</span>task_number<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> task_quue


<span class="token keyword">def</span> <span class="token function">get_result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> result_queue


<span class="token comment"># åˆ›å»ºç±»ä¼¼çš„queueManager</span>
<span class="token keyword">class</span> <span class="token class-name">QueueManager</span><span class="token punctuation">(</span>BaseManager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>


<span class="token keyword">def</span> <span class="token function">win_run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># æ³¨å†Œåœ¨ç½‘ç»œä¸Šï¼Œcallable å…³è”äº†Queue å¯¹è±¡</span>
    <span class="token comment"># å°†Queueå¯¹è±¡åœ¨ç½‘ç»œä¸­æš´éœ²</span>
    <span class="token comment">#windowä¸‹ç»‘å®šè°ƒç”¨æ¥å£ä¸èƒ½ç›´æ¥ä½¿ç”¨lambdaï¼Œæ‰€ä»¥åªèƒ½å…ˆå®šä¹‰å‡½æ•°å†ç»‘å®š</span>
    QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_task_queue'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span>get_task<span class="token punctuation">)</span>
    QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_result_queue'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span>get_result<span class="token punctuation">)</span>
    <span class="token comment"># ç»‘å®šç«¯å£å’Œè®¾ç½®éªŒè¯å£ä»¤</span>
    manager <span class="token operator">=</span> QueueManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8001</span><span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span><span class="token string">'qiye'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># å¯åŠ¨ç®¡ç†ï¼Œç›‘å¬ä¿¡æ¯é€šé“</span>
    manager<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">try</span><span class="token punctuation">:</span>

        <span class="token comment"># é€šè¿‡ç½‘ç»œè·å–ä»»åŠ¡é˜Ÿåˆ—å’Œç»“æœé˜Ÿåˆ—</span>
        task <span class="token operator">=</span> manager<span class="token punctuation">.</span>get_task_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
        result <span class="token operator">=</span> manager<span class="token punctuation">.</span>get_result_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># æ·»åŠ ä»»åŠ¡</span>
        <span class="token keyword">for</span> url <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"ImageUrl_"</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'url is %s'</span> <span class="token operator">%</span> url<span class="token punctuation">)</span>
            task<span class="token punctuation">.</span>put<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'try get result'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'result is %s'</span> <span class="token operator">%</span> result<span class="token punctuation">.</span>get<span class="token punctuation">(</span>timeout<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">except</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Manager error'</span><span class="token punctuation">)</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        manager<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># windowä¸‹å¤šè¿›ç¨‹å¯èƒ½æœ‰é—®é¢˜ï¼Œæ·»åŠ è¿™å¥è¯ç¼“è§£</span>
    freeze_support<span class="token punctuation">(</span><span class="token punctuation">)</span>
    win_run<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p><font color="red">workerå·¥ä½œæœº</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time
<span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager

<span class="token comment"># åˆ›å»ºç±»ä¼¼çš„QueueManager:</span>
<span class="token keyword">class</span> <span class="token class-name">QueueManager</span><span class="token punctuation">(</span>BaseManager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># å®ç°ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨QueueManageræ³¨å†Œè·å–Queueçš„æ–¹æ³•åç§°</span>
QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_task_queue'</span><span class="token punctuation">)</span>
QueueManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_result_queue'</span><span class="token punctuation">)</span>

<span class="token comment"># å®ç°ç¬¬äºŒæ­¥ï¼šè¿æ¥åˆ°æœåŠ¡å™¨:</span>
server_addr <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connect to server %s...'</span> <span class="token operator">%</span> server_addr<span class="token punctuation">)</span>
<span class="token comment"># ç«¯å£å’ŒéªŒè¯å£ä»¤æ³¨æ„ä¿æŒä¸æœåŠ¡è¿›ç¨‹è®¾ç½®çš„å®Œå…¨ä¸€è‡´:</span>
m <span class="token operator">=</span> QueueManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span>server_addr<span class="token punctuation">,</span> <span class="token number">8001</span><span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span><span class="token string">'qiye'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ä»ç½‘ç»œè¿æ¥:</span>
m<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># å®ç°ç¬¬ä¸‰æ­¥ï¼šè·å–Queueçš„å¯¹è±¡:</span>
task <span class="token operator">=</span> m<span class="token punctuation">.</span>get_task_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> m<span class="token punctuation">.</span>get_result_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># å®ç°ç¬¬å››æ­¥ï¼šä»taské˜Ÿåˆ—å–ä»»åŠ¡,å¹¶æŠŠç»“æœå†™å…¥resulté˜Ÿåˆ—:</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">not</span> task<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        image_url <span class="token operator">=</span> task<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span>timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'run task download %s...'</span> <span class="token operator">%</span> image_url<span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        result<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">'%s---&gt;success'</span><span class="token operator">%</span>image_url<span class="token punctuation">)</span>
<span class="token comment"># å¤„ç†ç»“æŸ:</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'worker exit.'</span><span class="token punctuation">)</span></code></pre>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<ul>
<li><a id="managers3">managersç¤ºä¾‹3ï¼šä½¿ç”¨BaseManagerè¿›è¡Œåˆ†å¸ƒå¼è¿›ç¨‹ä»»åŠ¡ï¼ˆä¸€å¯¹å¤šï¼‰</a></li>
</ul>
<p>å®ä¾‹è¯´æ˜ï¼šä¸ä¾‹2å·®ä¸å¤šï¼Œä¾æ¬¡å¯åŠ¨æœåŠ¡ç«¯å’Œå¤šä¸ªå®¢æˆ·ç«¯å³å¯ã€‚</p>
<p><font color="red">æœåŠ¡ç«¯manager</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># encoding:utf-8</span>

<span class="token keyword">import</span> random<span class="token punctuation">,</span> time<span class="token punctuation">,</span> queue
<span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager

<span class="token comment"># å‘é€ä»»åŠ¡çš„é˜Ÿåˆ—</span>
task_queue <span class="token operator">=</span> queue<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># æ¥æ”¶ç»“æœçš„é˜Ÿåˆ—</span>
result_queue <span class="token operator">=</span> queue<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># ä½¿ç”¨æ ‡å‡†å‡½æ•°æ¥ä»£æ›¿lambdaå‡½æ•°ï¼Œé¿å…python2.7ä¸­ï¼Œpickleæ— æ³•åºåˆ—åŒ–lambdaçš„é—®é¢˜</span>
<span class="token keyword">def</span> <span class="token function">get_task_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> task_queue
    <span class="token keyword">return</span> task_queue


<span class="token comment"># ä½¿ç”¨æ ‡å‡†å‡½æ•°æ¥ä»£æ›¿lambdaå‡½æ•°ï¼Œé¿å…python2.7ä¸­ï¼Œpickleæ— æ³•åºåˆ—åŒ–lambdaçš„é—®é¢˜</span>
<span class="token keyword">def</span> <span class="token function">get_result_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> task_queue
    <span class="token keyword">return</span> task_queue


<span class="token keyword">def</span> <span class="token function">startManager</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> authkey<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># æŠŠä¸¤ä¸ªQueueéƒ½æ³¨å†Œåˆ°ç½‘ç»œä¸Šï¼Œcallableå‚æ•°å…³è”äº†Queueå¯¹è±¡ï¼Œæ³¨æ„å›è°ƒå‡½æ•°ä¸èƒ½ä½¿ç”¨æ‹¬å·</span>
    BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_task_queue'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span>get_task_queue<span class="token punctuation">)</span>
    BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_result_queue'</span><span class="token punctuation">,</span> <span class="token builtin">callable</span><span class="token operator">=</span>get_result_queue<span class="token punctuation">)</span>
    <span class="token comment"># è®¾ç½®host,ç»‘å®šç«¯å£portï¼Œè®¾ç½®éªŒè¯ç ä¸ºauthkey</span>
    manager <span class="token operator">=</span> BaseManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span>authkey<span class="token punctuation">)</span>
    <span class="token comment"># å¯åŠ¨manageræœåŠ¡å™¨</span>
    manager<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> manager


<span class="token keyword">def</span> <span class="token function">put_queue</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># é€šè¿‡ç½‘ç»œè®¿é—®queueu</span>
    task <span class="token operator">=</span> manager<span class="token punctuation">.</span>get_task_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'Put task %d'</span> <span class="token operator">%</span> n<span class="token punctuation">)</span>
        task<span class="token punctuation">.</span>put<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    host <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span>
    port <span class="token operator">=</span> <span class="token number">5000</span>
    authkey <span class="token operator">=</span> <span class="token string">'abc'</span>
    <span class="token comment"># å¯åŠ¨manageræœåŠ¡å™¨</span>
    manager <span class="token operator">=</span> startManager<span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> authkey<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># ç»™taské˜Ÿåˆ—æ·»åŠ æ•°æ®</span>
    put_queue<span class="token punctuation">(</span>manager<span class="token punctuation">)</span>
    <span class="token comment"># å…³é—­æœåŠ¡å™¨</span>
    manager<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p><font color="red">æ‰§è¡Œç«¯worker</font></p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># encoding:utf-8</span>

<span class="token keyword">import</span> random<span class="token punctuation">,</span> time<span class="token punctuation">,</span> queue
<span class="token keyword">from</span> multiprocessing<span class="token punctuation">.</span>managers <span class="token keyword">import</span> BaseManager


<span class="token keyword">def</span> <span class="token function">start_worker</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> authkey<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># ç”±äºè¿™ä¸ªBaseManageråªä»ç½‘ç»œä¸Šè·å–queueï¼Œæ‰€ä»¥æ³¨å†Œæ—¶åªæä¾›åå­—</span>
    BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_task_queue'</span><span class="token punctuation">)</span>
    BaseManager<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">'get_result_queue'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'Connect to server %s'</span> <span class="token operator">%</span> host<span class="token punctuation">)</span>
    <span class="token comment"># æ³¨æ„ï¼Œç«¯å£portå’ŒéªŒè¯ç authkeyå¿…é¡»å’ŒmanageræœåŠ¡å™¨è®¾ç½®çš„å®Œå…¨ä¸€è‡´</span>
    worker <span class="token operator">=</span> BaseManager<span class="token punctuation">(</span>address<span class="token operator">=</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">,</span> authkey<span class="token operator">=</span>authkey<span class="token punctuation">)</span>
    <span class="token comment"># é“¾æ¥åˆ°manageræœåŠ¡å™¨</span>
    worker<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> worker


<span class="token keyword">def</span> <span class="token function">get_queue</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span><span class="token punctuation">:</span>
    task <span class="token operator">=</span> worker<span class="token punctuation">.</span>get_task_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> worker<span class="token punctuation">.</span>get_result_queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># ä»taské˜Ÿåˆ—å–æ•°æ®ï¼Œå¹¶æ·»åŠ åˆ°resulté˜Ÿåˆ—ä¸­</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> task<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
        n <span class="token operator">=</span> task<span class="token punctuation">.</span>get<span class="token punctuation">(</span>timeout<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'worker get %d'</span> <span class="token operator">%</span> n<span class="token punctuation">)</span>
        result<span class="token punctuation">.</span>put<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    host <span class="token operator">=</span> <span class="token string">'127.0.0.1'</span>
    port <span class="token operator">=</span> <span class="token number">5000</span>
    authkey <span class="token operator">=</span> <span class="token string">'abc'</span>
    <span class="token comment"># å¯åŠ¨worker</span>
    worker <span class="token operator">=</span> start_worker<span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> authkey<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># è·å–é˜Ÿåˆ—</span>
    get_queue<span class="token punctuation">(</span>worker<span class="token punctuation">)</span></code></pre>

<hr>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>è¾ƒå…¨çš„è¿›ç¨‹å†…å®¹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">è¿æ¥</th>
<th align="center">æ ‡ç­¾</th>
<th align="center">è¯´æ˜</th>
<th align="center">ç½‘ç«™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41922768/category_7767239.html">pythonåŸºç¡€-è¿›ç¨‹</a></td>
<td align="center"><code>multiprocessing</code></td>
<td align="center">è¿™ä¸ªä¸“æ ç³»åˆ—å†…å®¹å¾ˆå¤šå¾ˆå…¨ã€è®²åŸç†ã€è§£é‡Šå‚æ•°ã€å®ä¾‹å¤š</td>
<td align="center">CSDN</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017628290184064">å¤šè¿›ç¨‹</a></td>
<td align="center"><code>Process</code> <code>Queue</code> <code>Pool</code></td>
<td align="center">è®²åŸç†ã€ä¸è§£é‡Šå‚æ•°ã€ä¸€èˆ¬</td>
<td align="center">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dbf-/p/11127000.html">Python process (è¿›ç¨‹)</a></td>
<td align="center"><code>Process</code> <code>Pipe</code> <code>Queue</code> <code>Manager</code> <code>Lock</code> <code>Pool</code></td>
<td align="center">ä¸è§£é‡Šå‚æ•°ã€æœ‰ä¸€å®šåŸç†å†…å®¹</td>
<td align="center">åšå®¢å›­</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yzh2857/p/9683398.html">ã€ŠPythonã€‹è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼ˆIPCï¼‰ã€è¿›ç¨‹ä¹‹é—´çš„æ•°æ®å…±äº«ã€è¿›ç¨‹æ± </a></td>
<td align="center"><code>Pipe</code> <code>Queue</code> <code>JoinableQueue</code> <code>Manager</code> <code>Process</code> <code>Lock</code> <code>Pool</code></td>
<td align="center">è§£é‡Šå‚æ•°ã€æœ‰ä¸€å®šçš„åŸç†ã€æœ‰ä¸Šè¿°æœªæ¶‰åŠå†…å®¹</td>
<td align="center">åšå®¢å›­</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/64702600">ä¸€ç¯‡æ–‡ç« æå®šPythonå¤šè¿›ç¨‹(å…¨)</a></td>
<td align="center"><code>Process</code> <code>Pipe</code> <code>Queue</code> <code>Manager</code> <code>Pool</code></td>
<td align="center">è§£é‡Šå‚æ•°ã€æœ‰ä¸€å®šçš„åŸç†ã€æœ‰ä¸Šè¿°æœªæ¶‰åŠå†…å®¹</td>
<td align="center">çŸ¥ä¹</td>
</tr>
</tbody></table>
<p>çº¿ç¨‹æ± ï¼š</p>
<table>
<thead>
<tr>
<th align="center">è¿æ¥</th>
<th align="center">æ ‡ç­¾</th>
<th align="center">è¯´æ˜</th>
<th align="center">ç½‘ç«™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a target="_blank" rel="noopener" href="https://hexo.yuanjh.cn/hexo/e279ffad/">pythonè¿›é˜¶08å¹¶å‘ä¹‹å››map, apply, map_async, apply_asyncå·®å¼‚</a></td>
<td align="center"><code>Pool</code></td>
<td align="center">å¹¶å‘map/applyçš„å·®å¼‚</td>
<td align="center">ä¸ªäººåšå®¢</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="http://blog.shenwei.me/python-multiprocessing-pool-difference-between-map-apply-map_async-apply_async/">Python multiprocessing.Pool: Difference between map, apply, map_async, apply_async</a></td>
<td align="center"><code>Pool</code></td>
<td align="center">å¹¶å‘map/applyçš„å·®å¼‚</td>
<td align="center">ä¸ªäººåšå®¢ï¼Ÿ</td>
</tr>
</tbody></table>
<p><code>subprocess</code>ï¼š</p>
<table>
<thead>
<tr>
<th align="center">è¿æ¥</th>
<th align="center">æ ‡ç­¾</th>
<th align="center">è¯´æ˜</th>
<th align="center">ç½‘ç«™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39059031/article/details/108440342">Pythonè¿›é˜¶(å)å¤šè¿›ç¨‹multiprocessingå’Œsubprocessæ¨¡å—</a></td>
<td align="center"><code>multiprocessing</code> <code>subprocess</code></td>
<td align="center">åŸç†è®²æ˜ç™½ã€å‚æ•°è§£é‡Šæ¸…æ¥šã€ä¾‹å­å¤šï¼ˆæ’ä¸€å¥ï¼Œé‡Œé¢çš„pythonç³»åˆ—å†…å®¹ä¹Ÿå†™çš„æŒºå¥½çš„ï¼‰</td>
<td align="center">CSDN</td>
</tr>
</tbody></table>
<p>åˆ†å¸ƒå¼è¿›ç¨‹ï¼šï¼ˆå¤§æ¦‚çœ‹ä¸€ä¸‹å°±è¡Œäº†ï¼Œæ¯•ç«Ÿå¤§å®¶éƒ½æ˜¯äº’ç›¸æŠ„çš„ï¼‰</p>
<table>
<thead>
<tr>
<th align="center">è¿æ¥</th>
<th align="center">æ ‡ç­¾</th>
<th align="center">è¯´æ˜</th>
<th align="center">ç½‘ç«™</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.8/library/multiprocessing.html?highlight=freeze_support#examples">multiprocessing â€” åŸºäºè¿›ç¨‹çš„å¹¶è¡Œ</a></td>
<td align="center"><code>multiprocessing</code></td>
<td align="center">pythonå®˜ç½‘çš„ä¾‹å­</td>
<td align="center">pythonå®˜ç½‘</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liunnis/tag/BaseManager/">BaseManager</a></td>
<td align="center"><code>BaseManager</code></td>
<td align="center">è¿™ä¸ªç³»åˆ—æœ‰.ä¸œè¥¿</td>
<td align="center">åšå®¢å›­</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/guguobao/p/9400299.html">pythonåˆ†å¸ƒå¼è¿›ç¨‹</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">åšå®¢å›­</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chmyee/p/10081531.html">python åˆ†å¸ƒå¼è¿›ç¨‹å®ç°</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">åšå®¢å›­</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://www.ktanx.com/blog/p/870">python åˆ†å¸ƒå¼è¿›ç¨‹</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">ktanx</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://blog.csdn.net/chengxun03/article/details/105802073">åœ¨Pythonç¨‹åºä¸­å®ç°åˆ†å¸ƒå¼è¿›ç¨‹çš„æ•™ç¨‹</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">CSDN</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="https://blog.csdn.net/lilong117194/article/details/76051843">pythonåˆ†å¸ƒå¼è¿›ç¨‹ï¼ˆwindowsä¸‹ï¼‰</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">CSDN</td>
</tr>
<tr>
<td align="center"><a target="_blank" rel="noopener" href="http://t.zoukankan.com/bin-l-p-8615201.html">Python åˆ†å¸ƒå¼è¿›ç¨‹</a></td>
<td align="center"><code>managers</code></td>
<td align="center">ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</td>
<td align="center">ä¸ªäººåšå®¢</td>
</tr>
</tbody></table>
<h2 id="å¾…å®Œæˆ"><a href="#å¾…å®Œæˆ" class="headerlink" title="å¾…å®Œæˆ"></a>å¾…å®Œæˆ</h2><ul>
<li><input disabled="" type="checkbox"> socketå®ä¾‹</li>
<li><input checked="" disabled="" type="checkbox"> é€šä¿¡æ¨¡å¼</li>
<li><input disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41922768/article/details/83995322">è¿›ç¨‹åŒæ­¥</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41922768/article/details/84024587">æ•°æ®å…±äº«Manager</a></li>
<li><input checked="" disabled="" type="checkbox"> <a target="_blank" rel="noopener" href="https://blog.csdn.net/ctwy291314/article/details/89358144">å…±äº«å†…å­˜Value,Array</a></li>
<li><input disabled="" type="checkbox"> å­è¿›ç¨‹<code>subprocess</code></li>
<li><input checked="" disabled="" type="checkbox"> è¿›ç¨‹æ± </li>
<li><input disabled="" type="checkbox"> IOåºåˆ—åŒ–</li>
<li><input checked="" disabled="" type="checkbox"> åˆ†å¸ƒå¼è¿›ç¨‹</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">hhhhmdzz</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://hhhhmdzz.github.io/2022/03/09/python-jin-cheng/">https://hhhhmdzz.github.io/2022/03/09/python-jin-cheng/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">hhhhmdzz</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/python/">
                                    <span class="chip bg-color">python</span>
                                </a>
                            
                                <a href="/tags/%E8%BF%9B%E7%A8%8B/">
                                    <span class="chip bg-color">è¿›ç¨‹</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="https://unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    // new Valine({
    //     el: '#vcomments',
    //     appId: 'Ei1XiJqo7bzRu5lBjbBUXPIu-gzGzoHsz',
    //     appKey: 'Ojx0e72LHhv1hUfFNQO9tInO',
    //     serverURLs: '',
    //     notify: 'false' === 'true',
    //     verify: 'false' === 'true',
    //     visitor: 'true' === 'true',
    //     avatar: 'mm',
    //     pageSize: '10',
    //     lang: 'zh-cn',
    //     placeholder: 'just go go'
    // });
    new Valine({
        el: '#vcomments',
        appId: 'Ei1XiJqo7bzRu5lBjbBUXPIu-gzGzoHsz',
        appKey: 'Ojx0e72LHhv1hUfFNQO9tInO',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go',
        enableQQ: true,
        emojiCDN: '//i0.hdslb.com/bfs/emote/', 
        // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
        emojiMaps: {
        "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
        "tv_äº²äº²": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
        "tv_å·ç¬‘": "bb690d4107620f1c15cff29509db529a73aee261.png",
        "tv_å†è§": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
        "tv_å†·æ¼ ": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
        "tv_å‘æ€’": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
        "tv_å‘è´¢": "34db290afd2963723c6eb3c4560667db7253a21a.png",
        "tv_å¯çˆ±": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
        "tv_åè¡€": "09dd16a7aa59b77baa1155d47484409624470c77.png",
        "tv_å‘†": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
        "tv_å‘•å": "9f996894a39e282ccf5e66856af49483f81870f3.png",
        "tv_å›°": "241ee304e44c0af029adceb294399391e4737ef2.png",
        "tv_åç¬‘": "1f0b87f731a671079842116e0991c91c2c88645a.png",
        "tv_å¤§ä½¬": "093c1e2c490161aca397afc45573c877cdead616.png",
        "tv_å¤§å“­": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
        "tv_å§”å±ˆ": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
        "tv_å®³ç¾": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
        "tv_å°´å°¬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
        "tv_å¾®ç¬‘": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
        "tv_æ€è€ƒ": "90cf159733e558137ed20aa04d09964436f618a1.png",
        "tv_æƒŠå“": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
        "tv_æ‰“è„¸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
        "tv_æŠ“ç‹‚": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
        "tv_æŠ é¼»": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
        "tv_æ–œçœ¼ç¬‘": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
        "tv_æ— å¥ˆ": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
        "tv_æ™•": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
        "tv_æµæ±—": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
        "tv_æµæ³ª": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
        "tv_æµé¼»è¡€": "c32d39db2737f89b904ca32700d140a9241b0767.png",
        "tv_ç‚¹èµ": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
        "tv_ç”Ÿæ°”": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
        "tv_ç”Ÿç—…": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
        "tv_ç–‘é—®": "0793d949b18d7be716078349c202c15ff166f314.png",
        "tv_ç™½çœ¼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
        "tv_çš±çœ‰": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
        "tv_ç›®çªå£å‘†": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
        "tv_ç¡ç€": "8b196675b53af58264f383c50ad0945048290b33.png",
        "tv_ç¬‘å“­": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
        "tv_è…¼è…†": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
        "tv_è‰²": "61822c7e9aae5da76475e7892534545336b23a6f.png",
        "tv_è°ƒä¾ƒ": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
        "tv_è°ƒçš®": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
        "tv_é„™è§†": "6e72339f346a692a495b123174b49e4e8e781303.png",
        "tv_é—­å˜´": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
        "tv_éš¾è¿‡": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
        "tv_é¦‹": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
        "tv_é¬¼è„¸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
        "tv_é»‘äººé—®å·": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
        "tv_é¼“æŒ": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
        },
        requiredFields: ['nick','mail'], //è®¾ç½®å¿…å¡«é¡¹
    });
</script>

<!--é…·Qæ¨é€-->


<!-- è‡ªå·±æ·»åŠ çš„å†…å®¹ -->

<!-- ç›´è¾¾è¯„è®º -->
<div id="to_comment" class="comment-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#vcomments" title="ç›´è¾¾è¯„è®º">
        <i class="fas fa-comments"></i>
    </a>
</div>


    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/2022/03/09/python-xian-cheng/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="pythonçº¿ç¨‹">
                        
                        <span class="card-title">pythonçº¿ç¨‹</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            pythonçº¿ç¨‹ç›¸å…³æ¨¡å—çš„ä½¿ç”¨
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-03-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/%E7%BA%BF%E7%A8%8B/">
                        <span class="chip bg-color">çº¿ç¨‹</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                æœ¬ç¯‡&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/2022/03/09/python-jin-cheng/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="pythonè¿›ç¨‹">
                        
                        <span class="card-title">pythonè¿›ç¨‹</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            pythonè¿›ç¨‹ç›¸å…³æ¨¡å—çš„ä½¿ç”¨
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/%E8%BF%9B%E7%A8%8B/">
                        <span class="chip bg-color">è¿›ç¨‹</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="tencent"
                   type="playlist"
                   id="8531859362"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2022</span>
            
            <a href="/about" target="_blank">hhhhmdzz</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;ç«™ç‚¹æ€»å­—æ•°:&nbsp;<span
                        class="white-color">87.7k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- è¿è¡Œå¤©æ•°æé†’. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "6";
                        var startDate = "28";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);
                        
                        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
                        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
                        
                        // åŒºåˆ†æ˜¯å¦æœ‰å¹´ä»½.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffDays + ' å¤©';
                            } else if (language === 'zh-HK') {
                                daysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                // yearsAndDaysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                                yearsAndDaysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©' + diffHours + 'å°æ—¶' + diffMinutes + 'åˆ†é’Ÿ' + diffSeconds + 'ç§’';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    // calcSiteTime();
                    setInterval("calcSiteTime()", 250);
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/hhhhmdzz" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1453584196@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1453584196" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 1453584196" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- ç™½å¤©å’Œé»‘å¤œä¸»é¢˜ -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    
        <!-- <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script> -->
        <script src='/libs/mermaid/mermaid.min.js'></script>
        <script>
          if (window.mermaid) {
            mermaid.initialize({theme: 'forest'});
          }
        </script>
    

    

    <!-- é›ªèŠ±ç‰¹æ•ˆ -->
    

    <!-- é¼ æ ‡æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--è…¾è®¯å…”å°å·¢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
